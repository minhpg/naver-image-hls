const a30_0x34d559=a30_0xd970;function a30_0x433b(){const _0x573ee2=['WPLOW73cISoBzJxcUYS','smoNWOZcPCo8mgO','aSk2W6y7WP8','WOjgW7BdImoTW6BcGSoWsG','k8orCxlcVW','W4VdGgRcSXuswX8','tru7W5m7W6xcVXu','DCkdhaRdHdNdV8kbW5L/WQizWR4','WPVdN2W','xmoJWQBcN0OIjaHpmq','yCkjW6OPgColfCo0WQhcOCogWOhcHG','x8oJWRXfW6VcUmk0W5ddUs3dImkU','t8kxW5mNW7BdLSo+W5/dRW8','W5ZcMwSv','qCkoWOu','WRKwWOPxaW','WPpcKc51qa','WPWTW7uk','W6HgW44cwM5zWRVcUSoAWOFdPa','z8o6lSkED8kSWO8','p8kaWQxcOCk3','W7C0khBdMfRcM8knWQ9c','n8kbW6pcSCk7uSkL','cCkQW7SCWQNdUSkG','cCk8W6GCWR/dQW','WR4cWOXvhZvrWQm','WPFcOq9yW6uSW7xcISkUW48','aCk1A2RdMSkOW5lcIYTo','d04KWOK','W4xcSI7dUbRdISkLWPFcV8oK','nCktWR3cJCk3','W4vSW6ZcKCkxzG','WO44W6Scgq','W5pcGsm','W6SVd3lcKbZdMSkA','W53dMJxdP25UwrSEnG','W5vMW6pcKmkaFcZcQ3ddTq','WPpdKh8NW6ddLq','CsviW5miiCoNrW','WReVWOTAiq','W4z8W77cIW','WP/dV3BcULdcGmoR','sCorWR5gqgZdTq9SWRa','W4VcGSopeaRcQSkajclcKKTrWR4','W4tcKsrK','WONdLCkFsfJdTmombW','emkdW4O0','ngqqWRddIchcVha','WOuNW7ia','WRysWPbthZq','WOjCWRO','WQKsWPLzdJjkWR4','t8ofWPvRW6eRW6tdLmoeEftdRq','qmkFjrjXeZ3cSW','nCoEWRT3','ACoaW7ZdOSoQcCoYDCorW7S/kSo1','t1pcVa','FKtdVaGtW7W3W44BWRu','cmoyWRFcPCoJ','ixFcS8kSW6ivWOW','W4r3WPtcOmkok8o4nG','WQ/cGcBdUti','s8ocWPjVW6yRWOxdICoUxxJdMmoz','WOnhWR7cLCkZdmoryG','WP7dV2JcSG','EZRdQ8oUWQHFW4ldJmoLWQK','BJqcACoz','tSoPka','dSoDW5uYWRH1W5VcT8o/xW','WQFdOCowWRFdTSkfWQlcOItdJaxdSW','WQJdTepcL1a','iCoCsLZcVwlcRW','v8kFgbv3ccBcT8k8W7K','ysddS8o1WRTbW5VcImk3W48zWQSK','x8oKnKRcKNq','WPBdRG0L','bCoYAwNcLq','Emk3WPtcG8o/zSoTtSoTW6y','ngqdWRJdLq','W6lcOCkvW64','WQRdJZbuCa8','gSkKFMJcG8oV','WPRdTKGIW7u','AmkPWQdcQq','cmkXB3BcMq','WPNdI3iS','W6tdMCkdW7uSWOZcMIxdUSoUcmk0','dSkMosi','WQerWPLLWRpdQa','amk2W545WPy','W4ymfvxcTLJdOmkKWPb0','ymoNifRcSq','hSkcW4WSWRq','dmodWP/cUqqs','qCotnSkyiW','C8o+l8kim8o1W5u','WPGXW4zxWPVdISk2WRbVWRm','W7KYWQzGiHj4W7C','sSksW4RdVv8ItXzSgMi','gSoEwuGTvshcSCkSW78','ySkoW6SPqCk2t8ovWOpcGW','W7hcK3KolLxcTSoHhJe','saeMqCo1r8obWQG3mW','W5LpW6pdJW','WOikW5WFnW','sCosdSkV','W43cGhWrghNdJHLuW5q','WOm7WRqycCkRW5lcMa','w8oTiuu','W5ZcQZ/dPf/cQ8oHW4JdMmk9','phvfm8kqi8oNWR4TgG3dGG','zYVdIXeT','WOldKu88W7BdMtuS','dColWRJcLmoc','WOfBWQlcKmkic8oB','gCopWPlcRKCuzIGUbq','W57cLZHI','WQv1WOhcPCkG'];a30_0x433b=function(){return _0x573ee2;};return a30_0x433b();}(function(_0x2cb470,_0x3be39e){const _0x39d076=a30_0xd970,_0x5311ab=_0x2cb470();while(!![]){try{const _0x4d092b=-parseInt(_0x39d076(0x1a8,'#g!6'))/0x1+-parseInt(_0x39d076(0x1d1,'l^YK'))/0x2+parseInt(_0x39d076(0x1c8,'m7tU'))/0x3+parseInt(_0x39d076(0x1d4,'afLo'))/0x4+-parseInt(_0x39d076(0x1a7,'[ei$'))/0x5+-parseInt(_0x39d076(0x1af,'(nye'))/0x6*(parseInt(_0x39d076(0x1c3,'xXYS'))/0x7)+parseInt(_0x39d076(0x194,'vJXb'))/0x8*(parseInt(_0x39d076(0x189,'KyUW'))/0x9);if(_0x4d092b===_0x3be39e)break;else _0x5311ab['push'](_0x5311ab['shift']());}catch(_0x31b13e){_0x5311ab['push'](_0x5311ab['shift']());}}}(a30_0x433b,0x50169));const a30_0x1fb027=function(){let _0x1b7604=!![];return function(_0x1585bf,_0x39ba18){const _0x2e6155=_0x1b7604?function(){const _0x13cf59=a30_0xd970;if(_0x39ba18){if(_0x13cf59(0x180,'#g!6')===_0x13cf59(0x1a1,'hVF2')){const _0x34e6ca=_0x39ba18[_0x13cf59(0x17b,'b&&)')](_0x1585bf,arguments);return _0x39ba18=null,_0x34e6ca;}else{if(_0x1e659a){const _0x375e64=_0x384806[_0x13cf59(0x1df,'OYv&')](_0x21925d,arguments);return _0xe4418a=null,_0x375e64;}}}}:function(){};return _0x1b7604=![],_0x2e6155;};}(),a30_0x12398a=a30_0x1fb027(this,function(){const _0x438883=a30_0xd970;return a30_0x12398a[_0x438883(0x1d2,'e]6f')]()[_0x438883(0x184,'KyUW')](_0x438883(0x18c,'xC9H')+'+$')['toString']()[_0x438883(0x1e5,'e]6f')+'r'](a30_0x12398a)[_0x438883(0x1bc,'d%hx')](_0x438883(0x1de,'t]TE')+'+$');});a30_0x12398a();const fileSchema=require('../../mode'+a30_0x34d559(0x1b3,'afLo')),videoSchema=require(a30_0x34d559(0x1c0,'u7[#')+a30_0x34d559(0x192,'4cXA')),base64=require(a30_0x34d559(0x1b0,'FO]W')),redisClient=require(a30_0x34d559(0x18a,'e]6f')+'s'),encodeUrl=_0x248e4b=>{const _0x1ec5e1=a30_0x34d559,_0x2c0890=base64[_0x1ec5e1(0x1b5,'#g!6')](_0x248e4b);var _0x3906b9='';for(var _0x429707=_0x2c0890['length']-0x1;_0x429707>=0x0;_0x429707--){_0x3906b9+=_0x2c0890[_0x429707];}return _0x3906b9[_0x1ec5e1(0x1c6,'vJXb')](/=/g,'');};function a30_0xd970(_0x21b192,_0x6f1fa6){const _0x1bcb3f=a30_0x433b();return a30_0xd970=function(_0x12398a,_0x1fb027){_0x12398a=_0x12398a-0x176;let _0x433bef=_0x1bcb3f[_0x12398a];if(a30_0xd970['OgeHMp']===undefined){var _0xd970b8=function(_0x1c7951){const _0x44cf58='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2e0239='',_0x426812='',_0x37a13b=_0x2e0239+_0xd970b8;for(let _0xf8254f=0x0,_0x536cf1,_0xc3814e,_0x39f042=0x0;_0xc3814e=_0x1c7951['charAt'](_0x39f042++);~_0xc3814e&&(_0x536cf1=_0xf8254f%0x4?_0x536cf1*0x40+_0xc3814e:_0xc3814e,_0xf8254f++%0x4)?_0x2e0239+=_0x37a13b['charCodeAt'](_0x39f042+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x536cf1>>(-0x2*_0xf8254f&0x6)):_0xf8254f:0x0){_0xc3814e=_0x44cf58['indexOf'](_0xc3814e);}for(let _0x166662=0x0,_0x37ec09=_0x2e0239['length'];_0x166662<_0x37ec09;_0x166662++){_0x426812+='%'+('00'+_0x2e0239['charCodeAt'](_0x166662)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x426812);};const _0xc272bb=function(_0x4ce072,_0xaa8117){let _0x105dba=[],_0x423ce0=0x0,_0x34ea6a,_0x469c78='';_0x4ce072=_0xd970b8(_0x4ce072);let _0x17ddfa;for(_0x17ddfa=0x0;_0x17ddfa<0x100;_0x17ddfa++){_0x105dba[_0x17ddfa]=_0x17ddfa;}for(_0x17ddfa=0x0;_0x17ddfa<0x100;_0x17ddfa++){_0x423ce0=(_0x423ce0+_0x105dba[_0x17ddfa]+_0xaa8117['charCodeAt'](_0x17ddfa%_0xaa8117['length']))%0x100,_0x34ea6a=_0x105dba[_0x17ddfa],_0x105dba[_0x17ddfa]=_0x105dba[_0x423ce0],_0x105dba[_0x423ce0]=_0x34ea6a;}_0x17ddfa=0x0,_0x423ce0=0x0;for(let _0x2c26d6=0x0;_0x2c26d6<_0x4ce072['length'];_0x2c26d6++){_0x17ddfa=(_0x17ddfa+0x1)%0x100,_0x423ce0=(_0x423ce0+_0x105dba[_0x17ddfa])%0x100,_0x34ea6a=_0x105dba[_0x17ddfa],_0x105dba[_0x17ddfa]=_0x105dba[_0x423ce0],_0x105dba[_0x423ce0]=_0x34ea6a,_0x469c78+=String['fromCharCode'](_0x4ce072['charCodeAt'](_0x2c26d6)^_0x105dba[(_0x105dba[_0x17ddfa]+_0x105dba[_0x423ce0])%0x100]);}return _0x469c78;};a30_0xd970['oAVvXp']=_0xc272bb,_0x21b192=arguments,a30_0xd970['OgeHMp']=!![];}const _0x5e9c85=_0x1bcb3f[0x0],_0x370e74=_0x12398a+_0x5e9c85,_0x51e345=_0x21b192[_0x370e74];if(!_0x51e345){if(a30_0xd970['cYyTfX']===undefined){const _0x31cd87=function(_0x22d5c9){this['PdvVYv']=_0x22d5c9,this['VQBlVG']=[0x1,0x0,0x0],this['OphyQk']=function(){return'newState';},this['XbIOyK']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['pZrhNM']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x31cd87['prototype']['iTHpnj']=function(){const _0x51bd2e=new RegExp(this['XbIOyK']+this['pZrhNM']),_0x192f4b=_0x51bd2e['test'](this['OphyQk']['toString']())?--this['VQBlVG'][0x1]:--this['VQBlVG'][0x0];return this['aHWWYO'](_0x192f4b);},_0x31cd87['prototype']['aHWWYO']=function(_0x2a6712){if(!Boolean(~_0x2a6712))return _0x2a6712;return this['CUpzpM'](this['PdvVYv']);},_0x31cd87['prototype']['CUpzpM']=function(_0x131040){for(let _0x348b94=0x0,_0x2ce86c=this['VQBlVG']['length'];_0x348b94<_0x2ce86c;_0x348b94++){this['VQBlVG']['push'](Math['round'](Math['random']())),_0x2ce86c=this['VQBlVG']['length'];}return _0x131040(this['VQBlVG'][0x0]);},new _0x31cd87(a30_0xd970)['iTHpnj'](),a30_0xd970['cYyTfX']=!![];}_0x433bef=a30_0xd970['oAVvXp'](_0x433bef,_0x1fb027),_0x21b192[_0x370e74]=_0x433bef;}else _0x433bef=_0x51e345;return _0x433bef;},a30_0xd970(_0x21b192,_0x6f1fa6);}module[a30_0x34d559(0x1b4,'#g!6')]=(_0x28bb1b,_0xe81296)=>{const _0x4cb851=a30_0x34d559;return new Promise((_0x443751,_0x24682c)=>{const _0x2fc061=a30_0xd970;redisClient[_0x2fc061(0x1be,'4C4y')](_0x28bb1b[_0x2fc061(0x1e7,'qb]]')]['id'],async(_0x53a3fb,_0x3df682)=>{const _0x454d81=_0x2fc061;_0x53a3fb&&_0x24682c(_0x53a3fb);if(_0x3df682)return _0x454d81(0x185,'FO]W')==='DHkcy'?(_0xe81296[_0x454d81(0x1dd,'vJXb')](_0x3df682),_0x443751()):new _0x410b8a((_0x267247,_0x2005b8)=>{const _0x27b6d2=_0x454d81;_0x55c2e0=_0x110edd(_0x27b6d2(0x1b8,'b&&)')+_0x27b6d2(0x1d6,'Q6yr')+'tatic.net'+_0x42adb3[_0x27b6d2(0x1b1,'afLo')]),_0x267247(_0x194dc0[_0x27b6d2(0x1cf,'Aa^i')][_0x27b6d2(0x1b9,'Q1ZR')]+_0x27b6d2(0x19d,'d%hx')+_0x139e2d);});const _0x1a1fac=await videoSchema[_0x454d81(0x1e4,'hVF2')]({'_id':_0x28bb1b['params']['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})['exec']();if(!_0x1a1fac)return _0x454d81(0x1e9,'hVF2')!==_0x454d81(0x19c,'Aa^i')?_0xb311a[_0x454d81(0x197,'Zq)3')]()[_0x454d81(0x184,'KyUW')](_0x454d81(0x1ba,'vJXb')+'+$')[_0x454d81(0x1bf,'[M8Z')]()[_0x454d81(0x1c1,'d%hx')+'r'](_0x4b1b62)[_0x454d81(0x178,'b&&)')](_0x454d81(0x18c,'xC9H')+'+$'):(_0xe81296['status'](0x194),_0xe81296[_0x454d81(0x1cb,'l^YK')]({'message':_0x454d81(0x1e8,'zDLZ'),'message':'file\x20not\x20f'+_0x454d81(0x17c,'Zq)3')}),_0x443751());const _0x31e8a2=await fileSchema[_0x454d81(0x199,'Aa^i')]({'_id':_0x1a1fac[_0x454d81(0x198,'HS8v')][0x0]['_id']})[_0x454d81(0x1aa,'*9bw')]();if(!_0x31e8a2)return _0xe81296[_0x454d81(0x177,'xC9H')](0x194),_0xe81296['json']({'message':_0x454d81(0x1d3,'[ei$'),'message':_0x454d81(0x19a,'KyUW')+_0x454d81(0x17c,'Zq)3')}),_0x443751();var _0x4660cf=[_0x454d81(0x19e,'HS8v'),_0x454d81(0x1ea,'afLo')+_0x454d81(0x1ad,'Xhg!')+_0x31e8a2[_0x454d81(0x186,'FO]W')],_0x454d81(0x1b7,'4C4y')+_0x454d81(0x181,'[M8Z')+_0x454d81(0x17e,'e]6f'),_0x454d81(0x1a6,'KyUW')+_0x454d81(0x18d,'OYv&')+'N:'+_0x31e8a2[_0x454d81(0x191,'*9bw')+'tion'],_0x454d81(0x1a9,'#g!6')+_0x454d81(0x187,'&WMo')+_0x454d81(0x1d5,'Q6yr')];const _0x592308=_0x31e8a2['segments'][_0x454d81(0x1a5,'Zq)3')]((_0x100962,_0x5ee45c)=>{const _0x2654d0=_0x454d81;if('lHTjq'===_0x2654d0(0x179,'Zq)3'))return new Promise((_0x5c5d1f,_0x2b47ab)=>{const _0x3b5000=_0x2654d0;encoded_url=encodeUrl(_0x3b5000(0x1b2,'[M8Z')+'t-phinf.ps'+'tatic.net'+_0x100962['drive']),_0x5c5d1f(process[_0x3b5000(0x1ab,'A&G#')]['HOST']+_0x3b5000(0x1a0,'SpKE')+encoded_url);});else{const _0x46e852=_0x39f042?function(){const _0x3e6d90=_0x2654d0;if(_0x423ce0){const _0x39be64=_0x2c26d6[_0x3e6d90(0x1bd,'4cXA')](_0x31cd87,arguments);return _0x22d5c9=null,_0x39be64;}}:function(){};return _0x105dba=![],_0x46e852;}});await Promise[_0x454d81(0x1e0,'qb]]')](_0x592308)[_0x454d81(0x18e,'SpKE')](_0xb9ed24=>{const _0x371191=_0x454d81;if(_0x371191(0x1c4,'(nye')!==_0x371191(0x1bb,'afLo')){index=0x0;for(const _0xbdb4d3 of _0xb9ed24){_0x4660cf['push'](_0x371191(0x1d9,'Aa^i')+_0x31e8a2[_0x371191(0x1d0,'(nye')][index][_0x371191(0x1b6,'(nye')]+','),_0x4660cf[_0x371191(0x1c5,'d%hx')](_0xbdb4d3),index+=0x1;}_0x4660cf['push']('#EXT-X-END'+_0x371191(0x190,'FO]W'));}else _0xf46332=_0x16de63('http://pos'+_0x371191(0x1e1,'l^YK')+'tatic.net'+_0x20ec4f[_0x371191(0x183,'l^YK')]),_0x26695e(_0x1823b4['env']['HOST']+'/api/hls/'+_0x12a7be);})[_0x454d81(0x193,'qb]]')](()=>{const _0x89ea82=_0x454d81;if(_0x89ea82(0x1d7,'HS8v')!==_0x89ea82(0x19f,'l^YK')){const _0x186b1b=_0x4660cf[_0x89ea82(0x1cd,'4cXA')]('\x0a');redisClient[_0x89ea82(0x1eb,'Q1ZR')](_0x28bb1b[_0x89ea82(0x17f,'&WMo')]['id'],0x14*0xe10,_0x186b1b,_0x40a5e5=>{const _0x2b73bd=_0x89ea82;if(_0x2b73bd(0x1e3,'vJXb')!=='JKxJo'){if(_0x40a5e5){if(_0x2b73bd(0x1da,'xoOz')===_0x2b73bd(0x182,'qb]]'))_0x24682c(_0x40a5e5);else{const _0x29f685=_0x58616e[_0x2b73bd(0x1c2,'Zq)3')](_0x637a08);var _0x34f654='';for(var _0x27a410=_0x29f685[_0x2b73bd(0x1ce,'(nye')]-0x1;_0x27a410>=0x0;_0x27a410--){_0x34f654+=_0x29f685[_0x27a410];}return _0x34f654[_0x2b73bd(0x1d8,'t]TE')](/=/g,'');}}return _0xe81296[_0x2b73bd(0x1ae,'4cXA')](_0x186b1b),_0x443751();}else return _0xe67f6a&&_0x44e4b8(_0x194da8),_0x4d241e[_0x2b73bd(0x1ae,'4cXA')](_0x1c5f4a),_0x55bb44();});}else _0x3f972d['push'](_0x89ea82(0x1a3,'oAVf')+_0x443179[_0x89ea82(0x1cc,'Q1ZR')][_0x31add3]['duration']+','),_0x4c3dd6['push'](_0x1fad91),_0x1797ba+=0x1;});});})[_0x4cb851(0x1ac,'(nye')](_0x4925d8=>{const _0x229b5a=_0x4cb851;if(_0x229b5a(0x196,'Q6yr')===_0x229b5a(0x18f,'4cXA')){_0xe81296[_0x229b5a(0x19b,'4C4y')]({'status':'fail','message':_0x4925d8['message']});return;}else{_0x15fa50=0x0;for(const _0x1840d8 of _0xc6d7c9){_0x2529b5[_0x229b5a(0x1c9,'4C4y')](_0x229b5a(0x188,'(nye')+_0x3e9984[_0x229b5a(0x1ca,'m7tU')][_0xe4834a][_0x229b5a(0x1dc,'Aa^i')]+','),_0x89eb88[_0x229b5a(0x176,'ur8[')](_0x1840d8),_0x2bcefc+=0x1;}_0x26c71d['push'](_0x229b5a(0x1c7,'@C1o')+_0x229b5a(0x17a,'A&G#'));}});};