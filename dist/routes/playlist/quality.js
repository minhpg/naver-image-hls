const a25_0x5440d6=a25_0xe8f3;function a25_0x5f39(){const _0x371eb9=['ddXIWR8','Fx9aaCo7WRNdMCkWBSkk','WQ1czSkOWPODCmoR','cWKTFCkxW53dRCkMxSkcWOVdSG','WP7cH3X6','BvBcNSo9','q3Pnya','WObTW4HJvIvdkW','W7SaWO4qW5C','WOq1qKRcLL8','W7tdNcDL','xaveWPu','W4VdSabuW7O','iSkbt38','gCo8W73dNtZdIq','WQFcV8oeW4Hm','W6uGW73dVSozF2y','WOVcOXbjW5FdQsBdKa','W7FcLN89','W7VcRcGBW70','DXBdJmoxW6hdVxVdVmkIva','vN5dyuNdTCoeW4m','WR3dMsVcI8owW58','wmoTz3iuW5ldQq','W5ddOcDHF3RdPci','u8oxWQ9QCmobpIJdV8kg','imonACo1W5fTyYCdWRW','rmo1rSkXW5hcQa','BSoEW74tnq','WQRdUNlcRCoA','vGZdL2xdPWSXEG','fcGDnbxcRCofW7lcMCkNW5NdUq','WRGFWOK1fSkkW4v9W57cGq','DXBdJmoxW6hdVxVdVSkMva','WO9edCkiWRK','af8EW4VcKCoxW50BWOZcLSoOoG','W6RcUCo8WOvWW7JcOCo5WONcOa','WPJcGSoxWPhcISkdW5tcICkNWRe','WQ7cOmkXW4JcVCkghr9P','nspdPmoVWRu','WOhcNmoYW6Dm','WQjEj8kTWOClymoNWQNcUW','WQraW63dM8omW6e','WPVdKcXLWQ/dN0hdRrf5','uJhdQMtdKG','WOZdSCkHW44O','WPuZreS','CsxdTLBdPq','WObFhcdcPfNcGSkWWOX6W7K3','W57dVbHuWQldQqpdLhrB','FSkwnCkZ','k8kQW5WaW4y1','qgnbBW','WRLaW68','WOLJqSoQW74vpeK','rq9mWONdISkp','kvFcHSkIi2hdNq','uandWP/dPSkjW6i','WPj4bSkqW4K','W7VdJCk0WRycW7OHW4DRWOxcHHq','tSkByapcSxqAWQy','W5xdQCor','W6VcKWSeW6OMW7T6','W7lcPmkVW4u','WQveo8k/WOCqESoQ','WOhcRCoJ','W4ZdRCk4W4S','WO7cPW5C','s8ozWPFdHCk4Da','B3ZdI8oAW7Dj','fgpcKSkEm8oaAq','q8opWO8R','A8ocds/cVmoiWOeKzIbCW7i','gCoOW7ZdLa','cWGJCCkEW5NcQmkTsCk0WOFdT8oQ','oCk3W6HlWQywW7pcTSoIoCklWPO','tmkAeMRdTcSjWPRdM2DzW5m','ra9DWPFdImkeW6i','zCofWPG1W6G','rSoTExKbW5K','W7hcP8kGW4yCWPhcV8oF','W5NcRSkcW5ldOq','c3xdICkDiG','W4BdOSovWRWHbCod','q3JcPmof','z8omdI7dNSkJWRioBcu','wSo9zhy','WQZdNtNcNmkyWOfu','pdKDba','hc0vnbRcQmowW7xcS8kQW4NdIa','wcrVWO7dUW','W5rRuKJcShZdGmkb','dCkDwa','WOldTrNcRq','WPZcK2D3AmogfuW','zwFcSmks','r8oltaj8nCk/','WRtdHCk9W54z','dWiMFmo6WRpdJCklFSkk','C8o5WRZcVG','WOhcTCkqW7T4wmkDzCoWo8k5DSkz','tSoUWPRcRSkv','uSoEWPNdNW'];a25_0x5f39=function(){return _0x371eb9;};return a25_0x5f39();}(function(_0x4419fc,_0xca8e7d){const _0x23ed05=a25_0xe8f3,_0x2f1930=_0x4419fc();while(!![]){try{const _0x1c6c82=-parseInt(_0x23ed05(0x175,'A#[]'))/0x1*(-parseInt(_0x23ed05(0x170,'g2i%'))/0x2)+parseInt(_0x23ed05(0x19f,'Irg('))/0x3*(-parseInt(_0x23ed05(0x15b,'#Dvi'))/0x4)+parseInt(_0x23ed05(0x1aa,'6tY9'))/0x5+parseInt(_0x23ed05(0x16c,'uoRy'))/0x6+parseInt(_0x23ed05(0x168,'A#[]'))/0x7+parseInt(_0x23ed05(0x1a6,'f!#f'))/0x8*(parseInt(_0x23ed05(0x198,'JKmS'))/0x9)+-parseInt(_0x23ed05(0x16a,'pd$s'))/0xa;if(_0x1c6c82===_0xca8e7d)break;else _0x2f1930['push'](_0x2f1930['shift']());}catch(_0x1608c1){_0x2f1930['push'](_0x2f1930['shift']());}}}(a25_0x5f39,0x219b6));const a25_0x3cc32d=function(){let _0x197443=!![];return function(_0xf77a1b,_0x1ab3b5){const _0x4acbc0=_0x197443?function(){const _0x5aa85b=a25_0xe8f3;if(_0x5aa85b(0x1a3,'0Z19')===_0x5aa85b(0x14f,'TS)d')){if(_0x1ab3b5){const _0x1572f5=_0x1ab3b5[_0x5aa85b(0x147,'K%Pv')](_0xf77a1b,arguments);return _0x1ab3b5=null,_0x1572f5;}}else return _0x2b6d84['send'](_0x5371dd),_0xff3114();}:function(){};return _0x197443=![],_0x4acbc0;};}(),a25_0x3a7369=a25_0x3cc32d(this,function(){const _0x31d06e=a25_0xe8f3;return a25_0x3a7369['toString']()[_0x31d06e(0x19d,'iN&9')]('(((.+)+)+)'+'+$')[_0x31d06e(0x1a5,'TS)d')]()[_0x31d06e(0x149,'iRC!')+'r'](a25_0x3a7369)[_0x31d06e(0x157,'6tY9')](_0x31d06e(0x1a0,'B$FY')+'+$');});a25_0x3a7369();function a25_0xe8f3(_0x2edea1,_0xb3413f){const _0xc326ac=a25_0x5f39();return a25_0xe8f3=function(_0x3a7369,_0x3cc32d){_0x3a7369=_0x3a7369-0x144;let _0x5f3994=_0xc326ac[_0x3a7369];if(a25_0xe8f3['TGoCeD']===undefined){var _0xe8f37d=function(_0x465ac6){const _0xfc5a2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x42dcfe='',_0x1528aa='',_0x107cde=_0x42dcfe+_0xe8f37d;for(let _0x243b21=0x0,_0x46cdb4,_0x2bb66e,_0x29941b=0x0;_0x2bb66e=_0x465ac6['charAt'](_0x29941b++);~_0x2bb66e&&(_0x46cdb4=_0x243b21%0x4?_0x46cdb4*0x40+_0x2bb66e:_0x2bb66e,_0x243b21++%0x4)?_0x42dcfe+=_0x107cde['charCodeAt'](_0x29941b+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x46cdb4>>(-0x2*_0x243b21&0x6)):_0x243b21:0x0){_0x2bb66e=_0xfc5a2['indexOf'](_0x2bb66e);}for(let _0x4e018f=0x0,_0x5623b3=_0x42dcfe['length'];_0x4e018f<_0x5623b3;_0x4e018f++){_0x1528aa+='%'+('00'+_0x42dcfe['charCodeAt'](_0x4e018f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1528aa);};const _0x4692c5=function(_0x260872,_0x37e996){let _0x6538b6=[],_0x42f624=0x0,_0x1ebfa9,_0x485128='';_0x260872=_0xe8f37d(_0x260872);let _0x3455e8;for(_0x3455e8=0x0;_0x3455e8<0x100;_0x3455e8++){_0x6538b6[_0x3455e8]=_0x3455e8;}for(_0x3455e8=0x0;_0x3455e8<0x100;_0x3455e8++){_0x42f624=(_0x42f624+_0x6538b6[_0x3455e8]+_0x37e996['charCodeAt'](_0x3455e8%_0x37e996['length']))%0x100,_0x1ebfa9=_0x6538b6[_0x3455e8],_0x6538b6[_0x3455e8]=_0x6538b6[_0x42f624],_0x6538b6[_0x42f624]=_0x1ebfa9;}_0x3455e8=0x0,_0x42f624=0x0;for(let _0xa71fc2=0x0;_0xa71fc2<_0x260872['length'];_0xa71fc2++){_0x3455e8=(_0x3455e8+0x1)%0x100,_0x42f624=(_0x42f624+_0x6538b6[_0x3455e8])%0x100,_0x1ebfa9=_0x6538b6[_0x3455e8],_0x6538b6[_0x3455e8]=_0x6538b6[_0x42f624],_0x6538b6[_0x42f624]=_0x1ebfa9,_0x485128+=String['fromCharCode'](_0x260872['charCodeAt'](_0xa71fc2)^_0x6538b6[(_0x6538b6[_0x3455e8]+_0x6538b6[_0x42f624])%0x100]);}return _0x485128;};a25_0xe8f3['GJFOLQ']=_0x4692c5,_0x2edea1=arguments,a25_0xe8f3['TGoCeD']=!![];}const _0x1883ac=_0xc326ac[0x0],_0x12829c=_0x3a7369+_0x1883ac,_0x58f3b0=_0x2edea1[_0x12829c];if(!_0x58f3b0){if(a25_0xe8f3['GdEjvM']===undefined){const _0x10ae14=function(_0x5e6108){this['bwayIL']=_0x5e6108,this['YurLij']=[0x1,0x0,0x0],this['xxWFVx']=function(){return'newState';},this['cYMaSi']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['iqusfX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x10ae14['prototype']['xsziNz']=function(){const _0x5e7e9b=new RegExp(this['cYMaSi']+this['iqusfX']),_0x638aeb=_0x5e7e9b['test'](this['xxWFVx']['toString']())?--this['YurLij'][0x1]:--this['YurLij'][0x0];return this['bOZXXk'](_0x638aeb);},_0x10ae14['prototype']['bOZXXk']=function(_0x3ff82){if(!Boolean(~_0x3ff82))return _0x3ff82;return this['yLhhxp'](this['bwayIL']);},_0x10ae14['prototype']['yLhhxp']=function(_0x230bc4){for(let _0x581957=0x0,_0x159938=this['YurLij']['length'];_0x581957<_0x159938;_0x581957++){this['YurLij']['push'](Math['round'](Math['random']())),_0x159938=this['YurLij']['length'];}return _0x230bc4(this['YurLij'][0x0]);},new _0x10ae14(a25_0xe8f3)['xsziNz'](),a25_0xe8f3['GdEjvM']=!![];}_0x5f3994=a25_0xe8f3['GJFOLQ'](_0x5f3994,_0x3cc32d),_0x2edea1[_0x12829c]=_0x5f3994;}else _0x5f3994=_0x58f3b0;return _0x5f3994;},a25_0xe8f3(_0x2edea1,_0xb3413f);}const fileSchema=require(a25_0x5440d6(0x144,'g2i%')+a25_0x5440d6(0x166,'[N!L')),videoSchema=require(a25_0x5440d6(0x1a1,')lu4')+a25_0x5440d6(0x189,'iRC!')),base64=require(a25_0x5440d6(0x177,'iN&9')),redisClient=require('../../redi'+'s'),encodeUrl=_0x9b2422=>{const _0xfb4806=a25_0x5440d6,_0x25c55f=base64[_0xfb4806(0x190,']#lW')](_0x9b2422);var _0x2d2425='';for(var _0x4a4f3f=_0x25c55f[_0xfb4806(0x153,'xV08')]-0x1;_0x4a4f3f>=0x0;_0x4a4f3f--){_0x2d2425+=_0x25c55f[_0x4a4f3f];}return _0x2d2425[_0xfb4806(0x16d,'6tY9')](/=/g,'');};module[a25_0x5440d6(0x180,'ai7I')]=(_0x3855c5,_0x2836d6)=>{return new Promise((_0x4fde8a,_0x55e779)=>{const _0x400543=a25_0xe8f3;if(_0x400543(0x148,'#Dvi')===_0x400543(0x14d,'g2i%'))redisClient['get'](_0x3855c5[_0x400543(0x14a,'TJYO')]['id'],async(_0x3b97c0,_0x465b34)=>{const _0x316c7b=_0x400543;_0x3b97c0&&_0x55e779(_0x3b97c0);if(_0x465b34)return _0x2836d6[_0x316c7b(0x15f,'K[2O')](_0x465b34),_0x4fde8a();const _0x3e2212=await videoSchema[_0x316c7b(0x159,'6tY9')]({'_id':_0x3855c5['params']['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x316c7b(0x183,'[*^U')]();if(!_0x3e2212)return _0x2836d6[_0x316c7b(0x165,'phvc')](0x194),_0x2836d6['json']({'message':_0x316c7b(0x18c,'z8i1'),'message':_0x316c7b(0x151,'JKmS')+_0x316c7b(0x17f,'so7^')}),_0x4fde8a();const _0x235eab=await fileSchema['findOne']({'_id':_0x3e2212[_0x316c7b(0x1a4,'Q5)e')][0x0][_0x316c7b(0x17c,'A#[]')]})[_0x316c7b(0x154,'f!#f')]();if(!_0x235eab){if(_0x316c7b(0x171,'K[2O')!==_0x316c7b(0x185,'[*^U')){const _0x4b347d=_0x362118[_0x316c7b(0x1a2,'7M[w')](_0xb69f40);var _0xd58e14='';for(var _0x7aa4c4=_0x4b347d[_0x316c7b(0x16f,'n&!T')]-0x1;_0x7aa4c4>=0x0;_0x7aa4c4--){_0xd58e14+=_0x4b347d[_0x7aa4c4];}return _0xd58e14[_0x316c7b(0x19e,'n&!T')](/=/g,'');}else return _0x2836d6[_0x316c7b(0x164,'e!4B')](0x194),_0x2836d6[_0x316c7b(0x186,'e!4B')]({'message':_0x316c7b(0x18b,'cIVH'),'message':_0x316c7b(0x151,'JKmS')+_0x316c7b(0x163,'Irg(')}),_0x4fde8a();}var _0x29f15b=[_0x316c7b(0x158,'so7^'),_0x316c7b(0x19b,'K%Pv')+_0x316c7b(0x15a,'iRC!')+_0x235eab[_0x316c7b(0x173,'UgfL')],'#EXT-X-PLA'+'YLIST-TYPE'+_0x316c7b(0x187,'6tY9'),_0x316c7b(0x1a8,'K%Pv')+_0x316c7b(0x188,'pd$s')+'N:'+_0x235eab['targetDura'+'tion'],_0x316c7b(0x14b,'JKmS')+'IA-SEQUENC'+_0x316c7b(0x161,'g2i%')];const _0x5ec9b6=_0x235eab[_0x316c7b(0x15e,'20wu')][_0x316c7b(0x155,'TJYO')]((_0x103dbd,_0x39c9cc)=>{return new Promise((_0x306107,_0x27a968)=>{_0x306107(process['env']['HOST']+'/api/hls/'+encoded_url);});});await Promise['all'](_0x5ec9b6)[_0x316c7b(0x14e,']#lW')](_0x2ccf83=>{const _0x145c38=_0x316c7b;if(_0x145c38(0x17a,'6tY9')!==_0x145c38(0x19a,'20wu')){index=0x0;for(const _0x425d49 of _0x2ccf83){_0x29f15b[_0x145c38(0x176,'n&!T')]('#EXTINF:'+_0x235eab[_0x145c38(0x156,'9[Mx')][index][_0x145c38(0x160,'iRC!')]+','),_0x29f15b[_0x145c38(0x194,'A#[]')](_0x425d49),index+=0x1;}_0x29f15b[_0x145c38(0x169,'rf7Z')](_0x145c38(0x1a7,'v4m8')+_0x145c38(0x17d,'iN&9'));}else _0x108d75(_0x47b0fe[_0x145c38(0x15d,'UgfL')][_0x145c38(0x174,'z8i1')]+'/api/hls/'+_0x2a2fb1);})['then'](()=>{const _0x26db28=_0x316c7b;if(_0x26db28(0x196,'#Dvi')===_0x26db28(0x16e,'Gqdg')){const _0x31d04f=_0x29f15b[_0x26db28(0x192,'6tY9')]('\x0a');redisClient[_0x26db28(0x172,'[N!L')](_0x3855c5['params']['id'],0x14*0xe10,_0x31d04f,_0x3afe18=>{const _0xc45522=_0x26db28;return _0xc45522(0x14c,'TS)d')!==_0xc45522(0x181,'g2i%')?new _0x9e0e04((_0x29d50a,_0x3f8b9e)=>{const _0x299be1=_0xc45522;_0x29d50a(_0x396a8d['env'][_0x299be1(0x167,'Gqdg')]+_0x299be1(0x146,'K[2O')+_0x4be75e);}):(_0x3afe18&&(_0xc45522(0x1a9,'iRC!')===_0xc45522(0x18f,'omR1')?_0x55e779(_0x3afe18):_0x5bba61(_0x1c880b)),_0x2836d6['send'](_0x31d04f),_0x4fde8a());});}else{const _0x18c09a=_0x2cab53['join']('\x0a');_0x1b7dbc[_0x26db28(0x193,'JKmS')](_0x271267[_0x26db28(0x195,'rf7Z')]['id'],0x14*0xe10,_0x18c09a,_0x3ccf10=>{const _0x3f2d9e=_0x26db28;return _0x3ccf10&&_0x47795a(_0x3ccf10),_0x200bd1[_0x3f2d9e(0x162,'7vQp')](_0x18c09a),_0x2c43b7();});}});});else{_0xee89f=0x0;for(const _0x58e837 of _0x2879f6){_0x265181['push'](_0x400543(0x18e,'gs%J')+_0x43462b[_0x400543(0x19c,'f!#f')][_0x5d8bfb][_0x400543(0x17e,'cIVH')]+','),_0x2ec58f[_0x400543(0x178,'6pZb')](_0x58e837),_0x542ae2+=0x1;}_0x57525c[_0x400543(0x152,')lu4')](_0x400543(0x145,'ETs]')+_0x400543(0x191,'JKmS'));}})['catch'](_0x1fc8fb=>{const _0x2ca096=a25_0xe8f3;_0x2836d6[_0x2ca096(0x199,'oInu')]({'status':_0x2ca096(0x18d,'f!#f'),'message':_0x1fc8fb[_0x2ca096(0x197,'MK@1')]});return;});};