const a20_0x142c2e=a20_0x3af3;(function(_0x4cdbfc,_0x50e2cc){const _0x4b0116=a20_0x3af3,_0x46dcd6=_0x4cdbfc();while(!![]){try{const _0x4d0583=parseInt(_0x4b0116(0xb5,'hz9t'))/0x1+parseInt(_0x4b0116(0x6e,'uhvi'))/0x2+-parseInt(_0x4b0116(0xb6,'e0D^'))/0x3*(parseInt(_0x4b0116(0x76,'mNcT'))/0x4)+parseInt(_0x4b0116(0xcb,')H3M'))/0x5*(parseInt(_0x4b0116(0xd1,'T[0j'))/0x6)+parseInt(_0x4b0116(0xb1,'dszv'))/0x7*(-parseInt(_0x4b0116(0xc1,'4ks1'))/0x8)+parseInt(_0x4b0116(0xd2,'%BX&'))/0x9+-parseInt(_0x4b0116(0x98,'j7xv'))/0xa*(parseInt(_0x4b0116(0x7a,'X4!)'))/0xb);if(_0x4d0583===_0x50e2cc)break;else _0x46dcd6['push'](_0x46dcd6['shift']());}catch(_0xae815){_0x46dcd6['push'](_0x46dcd6['shift']());}}}(a20_0x1a60,0xd2c1e));const a20_0x29ae0e=function(){let _0x7c482a=!![];return function(_0x1205c3,_0x441bb3){const _0x38c188=_0x7c482a?function(){const _0x50ec6c=a20_0x3af3;if(_0x50ec6c(0xd0,'e0D^')!==_0x50ec6c(0x96,')ltJ')){if(_0x441bb3){if(_0x50ec6c(0xb2,'hz9t')!==_0x50ec6c(0x9c,'HDhs')){const _0xcd4bd8=_0x441bb3['apply'](_0x1205c3,arguments);return _0x441bb3=null,_0xcd4bd8;}else{const _0x163fcb=_0x37eb7f[_0x50ec6c(0xb0,'mNcT')]('\x0a');_0x57ab96['setex'](_0x4d36df['params']['id'],0x14*0xe10,_0x163fcb,_0x14601b=>{const _0x27a1b4=_0x50ec6c;return _0x14601b&&_0x4cdf7(_0x14601b),_0xc19179[_0x27a1b4(0xcf,'j]al')](_0x163fcb),_0x57ecbc();});}}}else _0x57dc97(_0x327e1f);}:function(){};return _0x7c482a=![],_0x38c188;};}(),a20_0x10fd80=a20_0x29ae0e(this,function(){const _0x801f53=a20_0x3af3;return a20_0x10fd80[_0x801f53(0x9d,'Ir9K')]()[_0x801f53(0xcd,'nZS]')]('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](a20_0x10fd80)[_0x801f53(0xa6,'mNcT')](_0x801f53(0xa7,'X4!)')+'+$');});a20_0x10fd80();const fileSchema=require(a20_0x142c2e(0xbb,'HDhs')+a20_0x142c2e(0xbf,'X4!)')),videoSchema=require('../../mode'+'ls/video'),base64=require(a20_0x142c2e(0xd3,'QZNn')),redisClient=require(a20_0x142c2e(0xc2,'uE#a')+'s'),encodeUrl=_0xe23f31=>{const _0x53bc78=a20_0x142c2e,_0x2c9b0b=base64[_0x53bc78(0xa0,')H3M')](_0xe23f31);var _0x53ae64='';for(var _0x182163=_0x2c9b0b[_0x53bc78(0x7d,'%LIW')]-0x1;_0x182163>=0x0;_0x182163--){_0x53ae64+=_0x2c9b0b[_0x182163];}return _0x53ae64['replace'](/=/g,'');};function a20_0x1a60(){const _0x518a25=['BMzBWOWmW6xdHq','zmoDAmkqpmkLtsW','BhzgWPS','vYe9W5fgW7xcUSksgmol','zmoEpmosySoheN5LWR7dUCoNnSod','W7qElSo5mW','FmkkxfKAWPuLwW','qfdcQmkw','Fmo7eNjU','qmkoW4v0trO','uYFcUXTWWQFcQmomW4ei','rKhdVmoYWO/cHLO','W69TW7rk','bmoFWOddGq','fSobc1NcR3vv','W6vWeqRdNSob','bNRcObOGW4pdQK3dP8kH','CgzpWPiiW6ZdLfG','W6jumSkfW6q','vgrDWPKh','tZ7cUSk2W6ZdHcCyWOSHW7BcRmkb','W4SLW6GgprxcTSkdWQ/dHG','cCoeWQ/dL8k/','ma9Mdq','e8kMvu/cK8ke','W7X6gry','W61nW71/WQXwW7ut','fHLzhcS','ihVdLX4ZhK3cMW','WRXDW592WQWMWQzqymkK','CLS4whecCCkdWPFcJSoWBfS','v0ilDSorquzKW60jnSkX','WPjUW7eJWRJcMxxcNG','qCoWiZFdJwLWE8ksW40','qmkyW5z6rXTnW6qZW48','W4KMW64','WQXPsmk9BuxdLmo5W5mM','WO0gW4i3bZpdJCkl','W6lcPSosWOy','W5HDW5nMW5qSW4PqAmk5','qIhcP1jIWOBcPa','W4GQW7ygBHpdPmofWRRcMq','nSk7W5ddLSk2srRdLGKveSkJ','W747W7a6zspcM2bmpW','W7XMhXy','hr7cRXObyMKFfmks','W6WZsCoWlaFcLSoXW5yN','uCoXiwZcLI9VEG','W4hdU3tcJG','WOKmWOH/Au9pWRWpWRS','eSklWOhdHN1LW6aE','pYNcL8owW7pcRmkjW6hdO8km','fSoqWPqRFd4JWOrYW7i','W7L5W65o','W7jqj8kuW6/cKW','q3FdPCoJWRtcJtarWQuh','A8oSfwa','aZjoe8kM','W4XoW7e6AHBdKuCU','tZZcUSkYW6FdGIblWQevW4/cH8kSWOm','WQ1NWRnilSoNWQK','aHPrjCocgLnOWPWK','WQtcGSoRWPa5WO4FDSoooG','W73cImoOWPTTWOezBmkllG','W7BcPSotWO/dHXBcNqO','W7iYfmo7','FXpdPs1hWPxcKSoNW7SU','fWBdSSodW5ZdGHBdQCoaW5zaWRhcSq','WQb0WQ11jN8','cmkMqeVcLConegy8W4W','BsTYWPK','W7reW7ij','ySkek8kpoq','ESoifK7cPG','rSoHj2JcMG','WQ5BbG3dP8oBFq','dCk3r0JcH8kqwG','Amo8cgW','a28fza','h2dcUWC7W5RdTLlcGSofpCkbWPFcTa','tZ3cUCk0W6xdHcfjWOqvW5JcKSkQWO4','qmooW57cK2a+W78sfMlcP8oC','Cc1qW4JcM8oJ','WRmtWQL9nsa','h0FdVmoqWPy','a8kEWPRdHd54','W7yVaSo9','f8o5W5ddMJPCCNHECq','WPfgWOO','W7/cLmkzba','W4qWW7un','W5ZcRHpcS8kud8o0fX3dUa','WQ1GW5ecWRS','pN/dGa','nq96gIfDlG','W5ldQv/cIei','WRb3v8kJzr/dI8o6WOOR','lshcICouW6u','WR/cQ8k7kW','n01uCG','jCoehxNcGNpcJa','eaiag2mcW401','W4SjWO5Y','z8kqyuK','vSkfW4H/','o8kzbtdcOM3cJmoYW7ZcQW','W5JcPHBcUSo3FSoaeIRdKSoaFa','omo9WOhdMCk+'];a20_0x1a60=function(){return _0x518a25;};return a20_0x1a60();}function a20_0x3af3(_0x31451a,_0x4b4582){const _0x218c97=a20_0x1a60();return a20_0x3af3=function(_0x10fd80,_0x29ae0e){_0x10fd80=_0x10fd80-0x6a;let _0x1a6047=_0x218c97[_0x10fd80];if(a20_0x3af3['cKHKeJ']===undefined){var _0x3af3d1=function(_0x4d1b0c){const _0x5c5d3b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x559cbd='',_0x4b44f3='',_0x8fbcce=_0x559cbd+_0x3af3d1;for(let _0x1714d3=0x0,_0x43f07d,_0x49e6d9,_0xa6f8cd=0x0;_0x49e6d9=_0x4d1b0c['charAt'](_0xa6f8cd++);~_0x49e6d9&&(_0x43f07d=_0x1714d3%0x4?_0x43f07d*0x40+_0x49e6d9:_0x49e6d9,_0x1714d3++%0x4)?_0x559cbd+=_0x8fbcce['charCodeAt'](_0xa6f8cd+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x43f07d>>(-0x2*_0x1714d3&0x6)):_0x1714d3:0x0){_0x49e6d9=_0x5c5d3b['indexOf'](_0x49e6d9);}for(let _0x401b38=0x0,_0x217006=_0x559cbd['length'];_0x401b38<_0x217006;_0x401b38++){_0x4b44f3+='%'+('00'+_0x559cbd['charCodeAt'](_0x401b38)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4b44f3);};const _0x43eee5=function(_0x3b1d77,_0xe9507c){let _0x463b20=[],_0x178eae=0x0,_0x12b8d8,_0x5b0a07='';_0x3b1d77=_0x3af3d1(_0x3b1d77);let _0xaf9f10;for(_0xaf9f10=0x0;_0xaf9f10<0x100;_0xaf9f10++){_0x463b20[_0xaf9f10]=_0xaf9f10;}for(_0xaf9f10=0x0;_0xaf9f10<0x100;_0xaf9f10++){_0x178eae=(_0x178eae+_0x463b20[_0xaf9f10]+_0xe9507c['charCodeAt'](_0xaf9f10%_0xe9507c['length']))%0x100,_0x12b8d8=_0x463b20[_0xaf9f10],_0x463b20[_0xaf9f10]=_0x463b20[_0x178eae],_0x463b20[_0x178eae]=_0x12b8d8;}_0xaf9f10=0x0,_0x178eae=0x0;for(let _0x3fedec=0x0;_0x3fedec<_0x3b1d77['length'];_0x3fedec++){_0xaf9f10=(_0xaf9f10+0x1)%0x100,_0x178eae=(_0x178eae+_0x463b20[_0xaf9f10])%0x100,_0x12b8d8=_0x463b20[_0xaf9f10],_0x463b20[_0xaf9f10]=_0x463b20[_0x178eae],_0x463b20[_0x178eae]=_0x12b8d8,_0x5b0a07+=String['fromCharCode'](_0x3b1d77['charCodeAt'](_0x3fedec)^_0x463b20[(_0x463b20[_0xaf9f10]+_0x463b20[_0x178eae])%0x100]);}return _0x5b0a07;};a20_0x3af3['gxsTOO']=_0x43eee5,_0x31451a=arguments,a20_0x3af3['cKHKeJ']=!![];}const _0x4ff405=_0x218c97[0x0],_0x221bef=_0x10fd80+_0x4ff405,_0x109077=_0x31451a[_0x221bef];if(!_0x109077){if(a20_0x3af3['ntJVyk']===undefined){const _0x41b749=function(_0x7dccaa){this['mbLJHF']=_0x7dccaa,this['kEWSpg']=[0x1,0x0,0x0],this['gDpBED']=function(){return'newState';},this['YvZWnG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BRZHDk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x41b749['prototype']['lDygkU']=function(){const _0x4ba767=new RegExp(this['YvZWnG']+this['BRZHDk']),_0x4a895d=_0x4ba767['test'](this['gDpBED']['toString']())?--this['kEWSpg'][0x1]:--this['kEWSpg'][0x0];return this['aDBhqz'](_0x4a895d);},_0x41b749['prototype']['aDBhqz']=function(_0x57468c){if(!Boolean(~_0x57468c))return _0x57468c;return this['KuTLyk'](this['mbLJHF']);},_0x41b749['prototype']['KuTLyk']=function(_0x51b861){for(let _0x3e575d=0x0,_0x1db2f2=this['kEWSpg']['length'];_0x3e575d<_0x1db2f2;_0x3e575d++){this['kEWSpg']['push'](Math['round'](Math['random']())),_0x1db2f2=this['kEWSpg']['length'];}return _0x51b861(this['kEWSpg'][0x0]);},new _0x41b749(a20_0x3af3)['lDygkU'](),a20_0x3af3['ntJVyk']=!![];}_0x1a6047=a20_0x3af3['gxsTOO'](_0x1a6047,_0x29ae0e),_0x31451a[_0x221bef]=_0x1a6047;}else _0x1a6047=_0x109077;return _0x1a6047;},a20_0x3af3(_0x31451a,_0x4b4582);}module['exports']=(_0x56123c,_0x5652c7)=>{const _0xc122bc=a20_0x142c2e;return new Promise((_0x22a0c4,_0x323ece)=>{const _0x34edb8=a20_0x3af3;redisClient[_0x34edb8(0xba,'d#)I')](_0x56123c['params']['id'],async(_0x47729d,_0x183429)=>{const _0x131ea1=_0x34edb8;if(_0x131ea1(0xaa,'c]f$')!=='Wgufj'){const _0x3b98b8=_0x4234ce[_0x131ea1(0x7f,'BnlL')](_0x349df0,arguments);return _0x2cdcfa=null,_0x3b98b8;}else{if(_0x47729d){if('OLECD'!==_0x131ea1(0x74,'xmnN')){_0x537341[_0x131ea1(0x72,'hz[b')]({'status':_0x131ea1(0x9e,'uhvi'),'message':_0x28bc15[_0x131ea1(0x97,'c]f$')]});return;}else _0x323ece(_0x47729d);}if(_0x183429){if('bkRNY'!==_0x131ea1(0x87,'5SZx'))return _0x5652c7[_0x131ea1(0x93,')H3M')](_0x183429),_0x22a0c4();else _0x1e3f5b[_0x131ea1(0x78,'j]al')](_0x131ea1(0xbc,'d#)I')+_0x52b4a1[_0x131ea1(0xb3,'95ZT')][_0x576f98][_0x131ea1(0x6b,'BgV]')]+','),_0x2c15eb[_0x131ea1(0x6c,'HDhs')](_0x5113f8),_0x55f16f+=0x1;}const _0x358325=await videoSchema['findOne']({'_id':_0x56123c[_0x131ea1(0x6f,'uE#a')]['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x131ea1(0x8d,'wHPx')]();if(!_0x358325)return _0x5652c7[_0x131ea1(0x7e,'1#1e')](0x194),_0x5652c7[_0x131ea1(0xc3,'mNcT')]({'message':_0x131ea1(0xcc,'xKz9'),'message':_0x131ea1(0x6a,'h)*Q')+_0x131ea1(0x99,'c]f$')}),_0x22a0c4();const _0x27bff4=await fileSchema[_0x131ea1(0x8f,'&GKh')]({'_id':_0x358325[_0x131ea1(0x8c,'OL[E')][0x0]['_id']})['exec']();if(!_0x27bff4)return _0x5652c7[_0x131ea1(0xaf,'NM%(')](0x194),_0x5652c7[_0x131ea1(0x85,'d#)I')]({'message':_0x131ea1(0xc7,'hNGr'),'message':_0x131ea1(0xc0,'d#)I')+_0x131ea1(0x91,'QnEY')}),_0x22a0c4();var _0x107513=[_0x131ea1(0xa5,'xmnN'),'#EXT-X-VER'+'SION:'+_0x27bff4[_0x131ea1(0x89,'hz9t')],'#EXT-X-PLA'+'YLIST-TYPE'+':VOD',_0x131ea1(0xb4,'xKz9')+_0x131ea1(0xbe,'xKz9')+'N:'+_0x27bff4[_0x131ea1(0xca,'OL[E')+'tion'],_0x131ea1(0xc4,'80I1')+_0x131ea1(0xa1,'jt&$')+_0x131ea1(0x83,'dszv')];const _0x41b03c=_0x27bff4[_0x131ea1(0xa8,'c]f$')][_0x131ea1(0x88,'95ZT')]((_0x4b84a3,_0x30abf5)=>{const _0x58c6d4=_0x131ea1;return _0x58c6d4(0xad,')ltJ')===_0x58c6d4(0x73,'Nua6')?new Promise((_0x33d2ed,_0x24ff76)=>{const _0x41adfc=_0x58c6d4;_0x33d2ed(_0x41adfc(0x70,'NM%(')+_0x41adfc(0x94,'&GKh')+_0x41adfc(0x82,'k(#u')+_0x41adfc(0x6d,'jt&$')+_0x41adfc(0xc5,'HDhs')+'gets/proxy'+_0x41adfc(0xd5,'h)*Q')+_0x41adfc(0xce,'%BX&')+_0x41adfc(0xb9,')H3M')+_0x41adfc(0xac,'d#)I')+_0x41adfc(0x8b,'HDhs')+_0x41adfc(0xb8,'xmnN')+_0x41adfc(0xc8,'QnEY')+_0x41adfc(0xc9,'A$3s')+_0x4b84a3[_0x41adfc(0x9f,'j]al')]);}):(_0x128f3a['status'](0x194),_0x348f30['json']({'message':_0x58c6d4(0xa4,')ltJ'),'message':_0x58c6d4(0xd4,'e0D^')+_0x58c6d4(0x92,'Ir9K')}),_0x27456d());});await Promise['all'](_0x41b03c)[_0x131ea1(0x79,'4LXy')](_0x5b0e01=>{const _0x2dc97d=_0x131ea1;index=0x0;for(const _0x4a89f8 of _0x5b0e01){_0x107513[_0x2dc97d(0x8e,'3jW8')]('#EXTINF:'+_0x27bff4[_0x2dc97d(0xb7,'5SZx')][index][_0x2dc97d(0xc6,'xmnN')]+','),_0x107513[_0x2dc97d(0xbd,'BgV]')](_0x4a89f8),index+=0x1;}_0x107513[_0x2dc97d(0xa3,'xKz9')](_0x2dc97d(0x9a,'GpNN')+_0x2dc97d(0x84,'y)Fn'));})[_0x131ea1(0x81,'HDhs')](()=>{const _0x5803db=_0x131ea1,_0x323726=_0x107513['join']('\x0a');redisClient[_0x5803db(0x75,'xmnN')](_0x56123c[_0x5803db(0x80,'A$3s')]['id'],0x14*0xe10,_0x323726,_0x31d92f=>{const _0x1655b5=_0x5803db;return _0x31d92f&&_0x323ece(_0x31d92f),_0x5652c7[_0x1655b5(0xae,'hz9t')](_0x323726),_0x22a0c4();});});}});})[_0xc122bc(0xa9,'nZS]')](_0x512e7c=>{const _0x4410c0=_0xc122bc;if('EjuvA'!==_0x4410c0(0x8a,'hNGr')){_0x5652c7[_0x4410c0(0x71,'WMF$')]({'status':'fail','message':_0x512e7c[_0x4410c0(0x77,'NM%(')]});return;}else _0x173a11(_0x1adb60);});};