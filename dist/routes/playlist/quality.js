const a19_0x528645=a19_0x2f49;(function(_0x1ebc94,_0x4b4025){const _0x2531e1=a19_0x2f49,_0x3ec7b8=_0x1ebc94();while(!![]){try{const _0xbea241=parseInt(_0x2531e1(0x18c,'MSPP'))/0x1*(parseInt(_0x2531e1(0x1e0,'05yy'))/0x2)+-parseInt(_0x2531e1(0x190,'iEcE'))/0x3*(parseInt(_0x2531e1(0x1a5,'pPLD'))/0x4)+parseInt(_0x2531e1(0x1ab,'FkTt'))/0x5+parseInt(_0x2531e1(0x1a7,'[x85'))/0x6*(-parseInt(_0x2531e1(0x1cd,'6I*J'))/0x7)+parseInt(_0x2531e1(0x1c4,'S@Z!'))/0x8*(parseInt(_0x2531e1(0x191,'Z&5!'))/0x9)+parseInt(_0x2531e1(0x1a6,'yO7P'))/0xa+parseInt(_0x2531e1(0x199,'t)2t'))/0xb;if(_0xbea241===_0x4b4025)break;else _0x3ec7b8['push'](_0x3ec7b8['shift']());}catch(_0x15b1bb){_0x3ec7b8['push'](_0x3ec7b8['shift']());}}}(a19_0x3212,0x2340f));const a19_0x45325f=function(){let _0xd0c3b6=!![];return function(_0x3dc511,_0x128708){const _0x2ec31c=a19_0x2f49;if(_0x2ec31c(0x1bb,'fhze')!==_0x2ec31c(0x1b5,'7R0e'))_0x54575a(_0xe401c9);else{const _0x2c2548=_0xd0c3b6?function(){const _0x50b7d7=_0x2ec31c;if(_0x128708){if(_0x50b7d7(0x1aa,')hL]')!==_0x50b7d7(0x1cb,'F5rQ'))return _0x12a3f6[_0x50b7d7(0x1ce,'2^69')](0x194),_0x20821a[_0x50b7d7(0x18a,'tg*v')]({'message':_0x50b7d7(0x1bc,'2^69'),'message':_0x50b7d7(0x1c9,'3lq4')+_0x50b7d7(0x1bd,'F5rQ')}),_0x512261();else{const _0x292cd0=_0x128708[_0x50b7d7(0x198,'t)2t')](_0x3dc511,arguments);return _0x128708=null,_0x292cd0;}}}:function(){};return _0xd0c3b6=![],_0x2c2548;}};}(),a19_0x5920c3=a19_0x45325f(this,function(){const _0x59fb30=a19_0x2f49;return a19_0x5920c3['toString']()[_0x59fb30(0x187,'rGBc')](_0x59fb30(0x19a,'xHKO')+'+$')['toString']()['constructo'+'r'](a19_0x5920c3)[_0x59fb30(0x1cf,'F5rQ')]('(((.+)+)+)'+'+$');});a19_0x5920c3();const fileSchema=require(a19_0x528645(0x1d3,'lQBO')+'ls/file'),videoSchema=require(a19_0x528645(0x1db,'Pb]8')+a19_0x528645(0x1e3,'StX6')),base64=require(a19_0x528645(0x1c7,'rGBc')),redisClient=require(a19_0x528645(0x184,'jff9')+'s'),encodeUrl=_0x3e7347=>{const _0xbd69e=a19_0x528645,_0x43a63e=base64['encode'](_0x3e7347);var _0x4b66b6='';for(var _0x55d8ad=_0x43a63e[_0xbd69e(0x1b4,'dZaE')]-0x1;_0x55d8ad>=0x0;_0x55d8ad--){_0x4b66b6+=_0x43a63e[_0x55d8ad];}return _0x4b66b6[_0xbd69e(0x1a9,'kA#b')](/=/g,'');};module['exports']=(_0x3cf4a2,_0x5ad744)=>{const _0x286645=a19_0x528645;return new Promise((_0x39dafc,_0x2d2f24)=>{const _0x4ac82b=a19_0x2f49;redisClient[_0x4ac82b(0x19c,'uO*k')](_0x3cf4a2['params']['id'],async(_0x460187,_0x1555e0)=>{const _0x1d9c8b=_0x4ac82b;if(_0x460187){if(_0x1d9c8b(0x1d4,'aqrN')===_0x1d9c8b(0x1bf,'7R0e'))_0x2d2f24(_0x460187);else return new _0x3828ab((_0x17502a,_0x34f9d6)=>{const _0x2a50f8=_0x1d9c8b;_0x56fe57=_0x35b90a(_0x46c305[_0x2a50f8(0x1b9,'[x85')]),_0x17502a(_0x1883c4[_0x2a50f8(0x1de,'s!M)')][_0x2a50f8(0x1e1,'StX6')]+_0x2a50f8(0x1be,'6I*J')+_0x30cee7);});}if(_0x1555e0)return _0x5ad744[_0x1d9c8b(0x1c8,'kA#b')](_0x1555e0),_0x39dafc();const _0x21cdb3=await videoSchema['findOne']({'_id':_0x3cf4a2[_0x1d9c8b(0x1ae,'Pb]8')]['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x1d9c8b(0x1a3,'iEcE')]();if(!_0x21cdb3)return _0x5ad744[_0x1d9c8b(0x182,'s!M)')](0x194),_0x5ad744[_0x1d9c8b(0x1d9,'3lq4')]({'message':'fail','message':_0x1d9c8b(0x1c6,'6I*J')+_0x1d9c8b(0x1a8,'MSPP')}),_0x39dafc();const _0x36bcb7=await fileSchema[_0x1d9c8b(0x1b6,'yO7P')]({'_id':_0x21cdb3[_0x1d9c8b(0x181,'uO*k')][0x0][_0x1d9c8b(0x1c5,'o4eA')]})[_0x1d9c8b(0x1a3,'iEcE')]();if(!_0x36bcb7)return _0x5ad744['status'](0x194),_0x5ad744[_0x1d9c8b(0x188,'yO7P')]({'message':_0x1d9c8b(0x1ba,'fhze'),'message':_0x1d9c8b(0x1a0,'StX6')+_0x1d9c8b(0x18b,'3Mi%')}),_0x39dafc();var _0x31d94b=['#EXTM3U',_0x1d9c8b(0x189,')hL]')+_0x1d9c8b(0x1d1,'idrr')+_0x36bcb7['version'],_0x1d9c8b(0x196,'mTmW')+_0x1d9c8b(0x1cc,'3lq4')+_0x1d9c8b(0x192,'o4eA'),_0x1d9c8b(0x1d8,')(EA')+_0x1d9c8b(0x1b3,'lQBO')+'N:'+_0x36bcb7[_0x1d9c8b(0x195,'lQBO')+_0x1d9c8b(0x1a2,'s!M)')],'#EXT-X-MED'+_0x1d9c8b(0x197,')hL]')+_0x1d9c8b(0x1b7,'glZz')];const _0x32c5b2=_0x36bcb7[_0x1d9c8b(0x1d7,'Fx69')][_0x1d9c8b(0x1d6,'dZaE')]((_0x3204ef,_0x5da225)=>{return new Promise((_0x377183,_0x789d49)=>{const _0x32d957=a19_0x2f49;if(_0x32d957(0x1a1,'f@9c')!==_0x32d957(0x19e,'FkTt'))encoded_url=encodeUrl(_0x3204ef[_0x32d957(0x1c3,'tg*v')]),_0x377183(process['env'][_0x32d957(0x1c1,'rGBc')]+_0x32d957(0x194,'idrr')+encoded_url);else{_0x14183d=0x0;for(const _0x1a90d8 of _0x51dbb0){_0x404ac5['push'](_0x32d957(0x1c2,'qp2q')+_0x24e2f3[_0x32d957(0x1da,'o4eA')][_0x2e1048]['duration']+','),_0xa804c[_0x32d957(0x183,'rGBc')](_0x1a90d8),_0x4d03f1+=0x1;}_0x55f32e[_0x32d957(0x183,'rGBc')](_0x32d957(0x1df,'QiDe')+_0x32d957(0x1b8,'xHKO'));}});});await Promise[_0x1d9c8b(0x1ac,'^uJW')](_0x32c5b2)[_0x1d9c8b(0x18e,'xHKO')](_0x26ac21=>{const _0x23410d=_0x1d9c8b;index=0x0;for(const _0x5d3c30 of _0x26ac21){_0x31d94b[_0x23410d(0x18d,'jff9')]('#EXTINF:'+_0x36bcb7[_0x23410d(0x185,'^uJW')][index][_0x23410d(0x1ad,'fjKl')]+','),_0x31d94b[_0x23410d(0x1d5,'3lq4')](_0x5d3c30),index+=0x1;}_0x31d94b[_0x23410d(0x193,'Pb]8')](_0x23410d(0x180,'aqrN')+_0x23410d(0x1c0,'MSPP'));})[_0x1d9c8b(0x19d,'lQBO')](()=>{const _0x128a24=_0x1d9c8b,_0x23e605=_0x31d94b['join']('\x0a');redisClient[_0x128a24(0x1dd,'6I*J')](_0x3cf4a2[_0x128a24(0x1ca,'S@Z!')]['id'],0x14*0xe10,_0x23e605,_0x252fcd=>{return _0x252fcd&&_0x2d2f24(_0x252fcd),_0x5ad744['send'](_0x23e605),_0x39dafc();});});});})[_0x286645(0x1d2,')hL]')](_0x1e7aeb=>{const _0x43a896=_0x286645;_0x5ad744[_0x43a896(0x186,'27[e')]({'status':_0x43a896(0x1e2,'aqrN'),'message':_0x1e7aeb[_0x43a896(0x1a4,'U7zV')]});return;});};function a19_0x2f49(_0x560a17,_0xcecedb){const _0x49601d=a19_0x3212();return a19_0x2f49=function(_0x5920c3,_0x45325f){_0x5920c3=_0x5920c3-0x180;let _0x321299=_0x49601d[_0x5920c3];if(a19_0x2f49['MffrXQ']===undefined){var _0x2f49a5=function(_0xcf7963){const _0x42f432='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bc0d4='',_0x2713ef='',_0x520e22=_0x4bc0d4+_0x2f49a5;for(let _0x91707d=0x0,_0x174c8d,_0x1ca799,_0x51be16=0x0;_0x1ca799=_0xcf7963['charAt'](_0x51be16++);~_0x1ca799&&(_0x174c8d=_0x91707d%0x4?_0x174c8d*0x40+_0x1ca799:_0x1ca799,_0x91707d++%0x4)?_0x4bc0d4+=_0x520e22['charCodeAt'](_0x51be16+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x174c8d>>(-0x2*_0x91707d&0x6)):_0x91707d:0x0){_0x1ca799=_0x42f432['indexOf'](_0x1ca799);}for(let _0xb92eb0=0x0,_0x4d6ad0=_0x4bc0d4['length'];_0xb92eb0<_0x4d6ad0;_0xb92eb0++){_0x2713ef+='%'+('00'+_0x4bc0d4['charCodeAt'](_0xb92eb0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2713ef);};const _0xbcf61c=function(_0x3bb7dc,_0x4de424){let _0x566d79=[],_0x141c7c=0x0,_0x2e68a6,_0x2ee160='';_0x3bb7dc=_0x2f49a5(_0x3bb7dc);let _0xc595a6;for(_0xc595a6=0x0;_0xc595a6<0x100;_0xc595a6++){_0x566d79[_0xc595a6]=_0xc595a6;}for(_0xc595a6=0x0;_0xc595a6<0x100;_0xc595a6++){_0x141c7c=(_0x141c7c+_0x566d79[_0xc595a6]+_0x4de424['charCodeAt'](_0xc595a6%_0x4de424['length']))%0x100,_0x2e68a6=_0x566d79[_0xc595a6],_0x566d79[_0xc595a6]=_0x566d79[_0x141c7c],_0x566d79[_0x141c7c]=_0x2e68a6;}_0xc595a6=0x0,_0x141c7c=0x0;for(let _0x33fa3b=0x0;_0x33fa3b<_0x3bb7dc['length'];_0x33fa3b++){_0xc595a6=(_0xc595a6+0x1)%0x100,_0x141c7c=(_0x141c7c+_0x566d79[_0xc595a6])%0x100,_0x2e68a6=_0x566d79[_0xc595a6],_0x566d79[_0xc595a6]=_0x566d79[_0x141c7c],_0x566d79[_0x141c7c]=_0x2e68a6,_0x2ee160+=String['fromCharCode'](_0x3bb7dc['charCodeAt'](_0x33fa3b)^_0x566d79[(_0x566d79[_0xc595a6]+_0x566d79[_0x141c7c])%0x100]);}return _0x2ee160;};a19_0x2f49['mqWKIq']=_0xbcf61c,_0x560a17=arguments,a19_0x2f49['MffrXQ']=!![];}const _0x15d905=_0x49601d[0x0],_0x2f68be=_0x5920c3+_0x15d905,_0x3cab7e=_0x560a17[_0x2f68be];if(!_0x3cab7e){if(a19_0x2f49['Lxuapi']===undefined){const _0x57f3da=function(_0x446090){this['IvkcUA']=_0x446090,this['KtZxDd']=[0x1,0x0,0x0],this['vqFdgt']=function(){return'newState';},this['nmJhch']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['hnRPzX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x57f3da['prototype']['PyPAxq']=function(){const _0x2c14af=new RegExp(this['nmJhch']+this['hnRPzX']),_0x4b673f=_0x2c14af['test'](this['vqFdgt']['toString']())?--this['KtZxDd'][0x1]:--this['KtZxDd'][0x0];return this['YEqtOt'](_0x4b673f);},_0x57f3da['prototype']['YEqtOt']=function(_0x29361c){if(!Boolean(~_0x29361c))return _0x29361c;return this['VHxNXm'](this['IvkcUA']);},_0x57f3da['prototype']['VHxNXm']=function(_0xb1af1){for(let _0x30046e=0x0,_0x4cceb9=this['KtZxDd']['length'];_0x30046e<_0x4cceb9;_0x30046e++){this['KtZxDd']['push'](Math['round'](Math['random']())),_0x4cceb9=this['KtZxDd']['length'];}return _0xb1af1(this['KtZxDd'][0x0]);},new _0x57f3da(a19_0x2f49)['PyPAxq'](),a19_0x2f49['Lxuapi']=!![];}_0x321299=a19_0x2f49['mqWKIq'](_0x321299,_0x45325f),_0x560a17[_0x2f68be]=_0x321299;}else _0x321299=_0x3cab7e;return _0x321299;},a19_0x2f49(_0x560a17,_0xcecedb);}function a19_0x3212(){const _0x44a97d=['W59yWPOLBSkMWPSfWPeJW79mWP8','lmkhkCokhq','WPz1W5C','WODQWR4hoCo0W7dcJxlcIG','dCo7WQZcKMHUpa','WOuEWO4Z','W4yGW7Ot','WQeIW7irWRxcNG3cHa','WOmeW4SRWQ1IpdpdLba','WQlcVCoxWR86','WObVW4dcOrn/','W5NcJSkauG','W5JcKCkzWOhdL2VcN8kaWQ/dHG','W4bbWO1gufTLWOC','WPZdKCk5W7q','W5RcNSkssgZdHa','s0BcUSoK','sbuzW6ZcVNf1FuLd','WQ/dImo1lW','W77cLCo/WQC','lmoKWP7cVCoWWR1lW5JdRe3cMW','WOBdISofW4C','W6dcTHBdHa','W4tcMSoVWQRcRCojWQpcGCo/A8oPWQa','W6xcIczGlb/dVW','rSo0AK02W4vNW7Tfka','WPFcG2xdVq','WQhcQCo4WRG','e8kEW7ldHWTRbSkWW4u','o8o9cwLtW7WsCcOu','qLhdTmk7WQ55bCo9W53dKW','iHfSW6VdLNGnBKjs','W7GFWQRdPsW','WQXEW6ZcVM0KwapcV8ohma','WRZdTLVcHdrIamkCW7jz','W5fOWRxcLuFdHCop','WQpcSCop','o8o0hMa','caWYxKe','u3PEguSxsSkZady','WQS4WRecW7ZcLaFcN8oAW44','WQBcI8oUW4ldRW','WODYW47cUW','WRpcKHLH','cNFdHCkHW78kW5K','oHBdUCo1Dmo3CmoLWP5iWQxcVq','eapdPSkYpYT7wf/cVCkcumkS','o8o+WPxdTbbIWP0v','DmkHW4tdQW','WPWlW5LXo8oYW44','pH00W4ldNq','uN9wgs9HwmkQdaP2W7C','W5jiWOy','u8kcWPD1EMNcNM8','WQhcVCo5WRehbW','W6FdV8kuWQ/cMNX0W59JW4ud','W5XIhCo+a8oVWO/dMZfUWPpcHa','WPRdJCkRsKRdMKVcHW','FCkLtZ1sW4ySDbuW','cmozl0PJW5Oxure6','WP0eWP/dSCo/W7K','WO/dSmkdW60T','r1ZcU8oUrhiU','uwJcRq','W5JcLYddVG','Bmk6WQtdSJa','v8ojWOJdTW','z8omWOddTSkY','wtxdT0C','WOaJq8kU','CmkdlCogsSoTWRlcHJK','WRtdSCksW5C5','v8kDW7NdMW','W6hcTmkGBG','WR5eWQRdO8kntLBcKq','WQhdICoZn8oq','D0e2WQa7W4BcGZOwWOa','W7lcVe4','oCklmCokrCoRWRhcGtz1','W4VcMSkaxYlcMIK','WP0lW4D5','BCobzCk9kSkUW7BdTXBdPa','nrf8W7ufW7m','WROBwmkWEG','uSoKqmklxSoTW43dMMBdHW','BCoAzmkFvSkYWRhcLL91WRFdQq','tcddV1/cMqq','WPWZtmk4v8k3','WPRdPr7cI8oSDmkpW4tdHSo4na','B8k2W43dOb4','cde1W5VdUW','yCkYvcayWQC7AJWq','W40KW6mOW7m','E8oDESkW','WPWaWOe','W6VdVIfuvNFdMCk2','W6BdV8k2W6FcOqddVmkmW4S8','yCoBzSk2','W57cSe3dLmkXtmkSW4m','W7/dSSkKW75ew8oHamopsa'];a19_0x3212=function(){return _0x44a97d;};return a19_0x3212();}