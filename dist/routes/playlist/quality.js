const a20_0x47dff6=a20_0x28b9;(function(_0x2276a4,_0x42b969){const _0x571e9b=a20_0x28b9,_0x7f9fec=_0x2276a4();while(!![]){try{const _0x568ccf=parseInt(_0x571e9b(0x148,'8YN%'))/0x1+-parseInt(_0x571e9b(0x140,'yU%H'))/0x2+-parseInt(_0x571e9b(0x12a,'YpMI'))/0x3+parseInt(_0x571e9b(0x13e,'[tCt'))/0x4*(-parseInt(_0x571e9b(0x12b,'QO]]'))/0x5)+parseInt(_0x571e9b(0xff,'QO]]'))/0x6*(parseInt(_0x571e9b(0xe1,'yZ7N'))/0x7)+-parseInt(_0x571e9b(0x12f,'gI&z'))/0x8+-parseInt(_0x571e9b(0xe0,'peH@'))/0x9*(-parseInt(_0x571e9b(0xec,'Jt*&'))/0xa);if(_0x568ccf===_0x42b969)break;else _0x7f9fec['push'](_0x7f9fec['shift']());}catch(_0x254304){_0x7f9fec['push'](_0x7f9fec['shift']());}}}(a20_0x4d94,0x87c2c));function a20_0x4d94(){const _0x4a7890=['oCkhW7pcJSoU','WRzgW49CWPq+WPbq','WRSiW4NcKContuRdPq','pZbEW4JdH8oIWOTA','W5eGW47dPG','WPrmW5SJW6tcJ8oM','WOlcKH3cN8kQ','kSoVWP8OW5tdGCkkDK0IW4ddOxVdUq','WOxcPI96ba','WRtdUchcJa','WQ0BjSk5WPDe','cCkkC8kVu8kxWPi','W4ldRSongSo/AtxcPmoowq','DtnyWPu','mmo2iCkgWQddIXmf','hmo6iG','W43cQW1Qrmo9wCkPrmk/','W6moWRHQ','aYigj2e','W5tdGmkcjCkWl8kUWPC','m8o1WOuXW4ZdMmkqBYvb','fSkYW4RcQCoEW4ZcLrZcIXq','WPRcS8kwxa','W40MWPldUmo7W7RdSHC','W7Xwsf53x8oAW6OuWQq','WRabWPu','C3RcJSkGW4xcVSkTW480WOO','xCkdW6BcJCoGW4xdRW','jCo6kSkoW6xdIWGcWP97','z8kuyaRcNCorWRziiSoT','W5tcUbP6','WR1cjw4','ouhcR8kbfq','WRGmW5ZcNCofua','W61CvKfItSok','yMdcRSkXW4xcTmkSW4y','W7JdM8kelSoj','W6/dJCoGFmk7tX0VWPze','amkzjeuw','W707h8kFWR1IWP3dQG','WOi4vG','nmoXsCk0WPTMs10eka','WPjNWOJcVCkKWQVdMtX/D8kcfG','qurWxJlcNSoFtZJdQSotWRG','W4FdVG7dGSo9fq3cJSkVFq','WPmKmbG','W444WOnagGb3WPtdR8kq','WP9qu8kIgmk8W73dGbZdVYOBWPy','DmoWBSoqFXbNWRmQWPy','dCkJW5dcVq','zCoPBmoyAbbq','amo9FmoR','W4KgW4j0WRxdKmk3n1WXs8ojWQa','W71yvuGUg8kB','CdBdVbmaWQW','W6mgkmkVWPvvW73cVM5k','W5u6W67dUSoGW7FdUr8','WR3cPXPWuW','W7OyWRz2ldO','nuRcPCkrWPRcHCoVW7ubWR0','W43cQW1Qrmo9wCk6t8kP','W6ahWOW5W6qpWRG','rmkiebVdOc7cJq','W7igWOCZ','W4VdOmooCCk9CSkZomk6W6iCW6ldLG','cCoWyhRdRxzbWQFdIwm','W4BdGmkkmSoRmG','WRldQcdcL0ZcOmof','dSkNW4ZcUmoaWOu','nZJdVuOe','wmoJAZjnWOhdK8k0WPxcHCkTEq','aSkHEdm','aCkdWRdcPXKHW7tdHSoyWQn2WOu','WOvAW5FdQ8kcW74','WPeYCCk8omkVnSkt','vSkgB8kMvmkkWQm','mxtcQYO3WQOmBCkW','WRpdHrRcGLy','W7nDWPZcICkYWOnRrSkeWR8','omkHlCkwkgPpWQRcMYW','pIRdPKC','WOZcISk7gmoG','WQJdQdZcG1hcPW','pmkiotO','WRWjACoA','WRXdzwNdOCkwW53cGSkfkq','mCkiELG','W7qrWPOgW4jGW5utubz9WQT/ha','kdzdWPtcKmkSWOiViaW','WPbdW4ddQq','W7ulWOmVW4Gj','WPfvWPeHW4e','WRX6WOJdMCkQW5XHgSo1eW','WPuCW4FdU8oIW7hdRG','rmocWPFdS8o2','A8kOW553','WQDtW7GQyx1BWQ/dGSk6','C8oLFCodBXC','WPvxWRO','EHrVW7a','ytnzWPZcISkJW4mX','kmk0vJNdHmoH','W7BcMadcMSk1wgS','W5/dM8kcka','v8kuW75l','WOFcImoVthddTHnS','tuv9wtldHSowEtFdJSoF'];a20_0x4d94=function(){return _0x4a7890;};return a20_0x4d94();}const a20_0x6d1181=function(){let _0x1afaca=!![];return function(_0x331662,_0x1813be){const _0x50178a=a20_0x28b9;if('GAMWC'===_0x50178a(0x100,']&RS')){const _0x2c161f=_0x1afaca?function(){const _0x17ab09=_0x50178a;if(_0x1813be){const _0x45aab2=_0x1813be[_0x17ab09(0xf3,'u(Gu')](_0x331662,arguments);return _0x1813be=null,_0x45aab2;}}:function(){};return _0x1afaca=![],_0x2c161f;}else return _0x31117b[_0x50178a(0xf6,'vYyw')](0x194),_0x279ee5[_0x50178a(0x111,'6eX4')]({'message':_0x50178a(0xf8,'Cl&o'),'message':'file\x20not\x20f'+'ound'}),_0x27deb8();};}(),a20_0x15bf53=a20_0x6d1181(this,function(){const _0xc2a8ad=a20_0x28b9;return a20_0x15bf53[_0xc2a8ad(0xdf,'jqFz')]()['search'](_0xc2a8ad(0x12c,'xtm9')+'+$')[_0xc2a8ad(0x138,'YpMI')]()['constructo'+'r'](a20_0x15bf53)[_0xc2a8ad(0x10a,'@P6k')](_0xc2a8ad(0x125,'sXkR')+'+$');});a20_0x15bf53();function a20_0x28b9(_0x26f2ad,_0x8bc858){const _0x375814=a20_0x4d94();return a20_0x28b9=function(_0x15bf53,_0x6d1181){_0x15bf53=_0x15bf53-0xdf;let _0x4d949b=_0x375814[_0x15bf53];if(a20_0x28b9['yGysfk']===undefined){var _0x28b9f2=function(_0x2286fb){const _0x20c45f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x10f1d1='',_0x5bdf3c='',_0x12c0ec=_0x10f1d1+_0x28b9f2;for(let _0x501a86=0x0,_0x21c867,_0x4dc076,_0x20dae5=0x0;_0x4dc076=_0x2286fb['charAt'](_0x20dae5++);~_0x4dc076&&(_0x21c867=_0x501a86%0x4?_0x21c867*0x40+_0x4dc076:_0x4dc076,_0x501a86++%0x4)?_0x10f1d1+=_0x12c0ec['charCodeAt'](_0x20dae5+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x21c867>>(-0x2*_0x501a86&0x6)):_0x501a86:0x0){_0x4dc076=_0x20c45f['indexOf'](_0x4dc076);}for(let _0x2c0433=0x0,_0x3d6109=_0x10f1d1['length'];_0x2c0433<_0x3d6109;_0x2c0433++){_0x5bdf3c+='%'+('00'+_0x10f1d1['charCodeAt'](_0x2c0433)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5bdf3c);};const _0x5f1ec7=function(_0x4d30e3,_0x521ad7){let _0x39ca56=[],_0x5782e7=0x0,_0x31203c,_0x38412f='';_0x4d30e3=_0x28b9f2(_0x4d30e3);let _0x276838;for(_0x276838=0x0;_0x276838<0x100;_0x276838++){_0x39ca56[_0x276838]=_0x276838;}for(_0x276838=0x0;_0x276838<0x100;_0x276838++){_0x5782e7=(_0x5782e7+_0x39ca56[_0x276838]+_0x521ad7['charCodeAt'](_0x276838%_0x521ad7['length']))%0x100,_0x31203c=_0x39ca56[_0x276838],_0x39ca56[_0x276838]=_0x39ca56[_0x5782e7],_0x39ca56[_0x5782e7]=_0x31203c;}_0x276838=0x0,_0x5782e7=0x0;for(let _0x55fad5=0x0;_0x55fad5<_0x4d30e3['length'];_0x55fad5++){_0x276838=(_0x276838+0x1)%0x100,_0x5782e7=(_0x5782e7+_0x39ca56[_0x276838])%0x100,_0x31203c=_0x39ca56[_0x276838],_0x39ca56[_0x276838]=_0x39ca56[_0x5782e7],_0x39ca56[_0x5782e7]=_0x31203c,_0x38412f+=String['fromCharCode'](_0x4d30e3['charCodeAt'](_0x55fad5)^_0x39ca56[(_0x39ca56[_0x276838]+_0x39ca56[_0x5782e7])%0x100]);}return _0x38412f;};a20_0x28b9['UIoItO']=_0x5f1ec7,_0x26f2ad=arguments,a20_0x28b9['yGysfk']=!![];}const _0x1b6c8a=_0x375814[0x0],_0xe4a6b8=_0x15bf53+_0x1b6c8a,_0xc7ae7a=_0x26f2ad[_0xe4a6b8];if(!_0xc7ae7a){if(a20_0x28b9['bVSLVJ']===undefined){const _0xdff3bd=function(_0x7b8f86){this['sqBayx']=_0x7b8f86,this['oPqlEH']=[0x1,0x0,0x0],this['pgHfxX']=function(){return'newState';},this['ltYhGx']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['epCYwK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xdff3bd['prototype']['cGGeHy']=function(){const _0x211a92=new RegExp(this['ltYhGx']+this['epCYwK']),_0x4e457f=_0x211a92['test'](this['pgHfxX']['toString']())?--this['oPqlEH'][0x1]:--this['oPqlEH'][0x0];return this['EsOAog'](_0x4e457f);},_0xdff3bd['prototype']['EsOAog']=function(_0x190bf8){if(!Boolean(~_0x190bf8))return _0x190bf8;return this['RrNhIC'](this['sqBayx']);},_0xdff3bd['prototype']['RrNhIC']=function(_0x1879de){for(let _0x257f87=0x0,_0x4b1b56=this['oPqlEH']['length'];_0x257f87<_0x4b1b56;_0x257f87++){this['oPqlEH']['push'](Math['round'](Math['random']())),_0x4b1b56=this['oPqlEH']['length'];}return _0x1879de(this['oPqlEH'][0x0]);},new _0xdff3bd(a20_0x28b9)['cGGeHy'](),a20_0x28b9['bVSLVJ']=!![];}_0x4d949b=a20_0x28b9['UIoItO'](_0x4d949b,_0x6d1181),_0x26f2ad[_0xe4a6b8]=_0x4d949b;}else _0x4d949b=_0xc7ae7a;return _0x4d949b;},a20_0x28b9(_0x26f2ad,_0x8bc858);}const fileSchema=require('../../mode'+a20_0x47dff6(0x105,'kvrL')),videoSchema=require(a20_0x47dff6(0xf5,'6eX4')+a20_0x47dff6(0x117,'YpMI')),base64=require(a20_0x47dff6(0x135,'QsGz')),redisClient=require('../../redi'+'s'),encodeUrl=_0x59974a=>{const _0x54d6ab=a20_0x47dff6,_0x3863d8=base64['encode'](_0x59974a);var _0xfa505d='';for(var _0x558d68=_0x3863d8[_0x54d6ab(0xfa,'XFXe')]-0x1;_0x558d68>=0x0;_0x558d68--){_0xfa505d+=_0x3863d8[_0x558d68];}return _0xfa505d[_0x54d6ab(0x122,'QsGz')](/=/g,'');};module[a20_0x47dff6(0x132,'vYyw')]=(_0x51b0c5,_0x733e17)=>{const _0x245470=a20_0x47dff6;return new Promise((_0x18fdfb,_0x51c95f)=>{const _0x5a680c=a20_0x28b9;redisClient[_0x5a680c(0x128,'jqFz')](_0x51b0c5[_0x5a680c(0x121,'q]In')]['id'],async(_0x21ac1a,_0x5b82fa)=>{const _0x5b32ae=_0x5a680c;_0x21ac1a&&('mZwlR'===_0x5b32ae(0x112,'QO]]')?(_0x2ab9b6[_0x5b32ae(0x104,'YpMI')](_0x5b32ae(0x127,'@P6k')+_0x427c78[_0x5b32ae(0x10e,'@CjD')][_0x543494]['duration']+','),_0x44c3fb[_0x5b32ae(0xf4,'JeXI')](_0xde668e),_0x165e59+=0x1):_0x51c95f(_0x21ac1a));if(_0x5b82fa){if(_0x5b32ae(0xf0,'kvrL')===_0x5b32ae(0xe2,'RrO%')){_0x3de72b[_0x5b32ae(0xe5,'9IyH')]({'status':_0x5b32ae(0xeb,'CmyY'),'message':_0x54802f['message']});return;}else return _0x733e17[_0x5b32ae(0x131,']&RS')](_0x5b82fa),_0x18fdfb();}const _0x1b1d98=await videoSchema[_0x5b32ae(0x13d,'0FWF')]({'_id':_0x51b0c5[_0x5b32ae(0x144,']&RS')]['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x5b32ae(0xee,'xyk9')]();if(!_0x1b1d98)return _0x733e17[_0x5b32ae(0x142,'VSCU')](0x194),_0x733e17['json']({'message':_0x5b32ae(0x12d,'qE0%'),'message':'file\x20not\x20f'+_0x5b32ae(0x11f,'CzVK')}),_0x18fdfb();const _0xfa970f=await fileSchema[_0x5b32ae(0x10b,'peH@')]({'_id':_0x1b1d98['files'][0x0][_0x5b32ae(0x10f,'@CjD')]})['exec']();if(!_0xfa970f){if(_0x5b32ae(0x108,'bF6$')!==_0x5b32ae(0x126,'Q87e')){_0x313a74=0x0;for(const _0x12f4b0 of _0xbf23bf){_0x480985['push'](_0x5b32ae(0x103,'Cl&o')+_0x46de68[_0x5b32ae(0x101,'Jt*&')][_0x4d9b05]['duration']+','),_0x434c4b[_0x5b32ae(0x133,'kuXJ')](_0x12f4b0),_0x3d387e+=0x1;}_0x377249[_0x5b32ae(0x10d,'nN)h')]('#EXT-X-END'+_0x5b32ae(0xfd,'JeXI'));}else return _0x733e17[_0x5b32ae(0x136,'yZ7N')](0x194),_0x733e17[_0x5b32ae(0xe9,'D9l2')]({'message':'fail','message':_0x5b32ae(0x11c,'@CjD')+'ound'}),_0x18fdfb();}var _0x493291=[_0x5b32ae(0x11b,']&RS'),_0x5b32ae(0x13c,'bF6$')+_0x5b32ae(0x139,'bF6$')+_0xfa970f[_0x5b32ae(0x143,'RrO%')],'#EXT-X-PLA'+_0x5b32ae(0xe4,'#n8d')+_0x5b32ae(0x11e,'bF6$'),_0x5b32ae(0x13b,'SRNC')+_0x5b32ae(0x12e,'6eX4')+'N:'+_0xfa970f[_0x5b32ae(0x130,'vYyw')+'tion'],_0x5b32ae(0x11d,'XFXe')+_0x5b32ae(0xf1,'xyk9')+_0x5b32ae(0x119,'xyk9')];const _0x417c75=_0xfa970f[_0x5b32ae(0xfe,'1#ly')]['map']((_0x30e6cd,_0x45f901)=>{return new Promise((_0xd1a350,_0x3379ac)=>{const _0x3e77a8=a20_0x28b9;if(_0x3e77a8(0x120,'#fLS')!==_0x3e77a8(0xe6,'yU%H')){const _0x3799c6=_0x4044ad['encode'](_0x38ef0e);var _0x30fbb3='';for(var _0xfb8c4d=_0x3799c6[_0x3e77a8(0xe7,'RrO%')]-0x1;_0xfb8c4d>=0x0;_0xfb8c4d--){_0x30fbb3+=_0x3799c6[_0xfb8c4d];}return _0x30fbb3['replace'](/=/g,'');}else _0xd1a350(_0x3e77a8(0x115,']&RS')+_0x3e77a8(0x141,'Rl06')+'cial.googl'+_0x3e77a8(0x11a,'SRNC')+_0x3e77a8(0xea,'CzVK')+'gets/proxy'+'?container'+_0x3e77a8(0x137,'@P6k')+'expand=1&r'+'efresh=259'+_0x3e77a8(0x129,'@@oQ')+_0x3e77a8(0xe3,'ssX@')+_0x3e77a8(0xed,'nN)h')+_0x3e77a8(0x113,'VSCU')+encoded_url);});});await Promise[_0x5b32ae(0xf7,'C%V3')](_0x417c75)['then'](_0xe6ee1a=>{const _0x20a7b8=_0x5b32ae;index=0x0;for(const _0x2740ca of _0xe6ee1a){_0x493291[_0x20a7b8(0x109,'RrO%')]('#EXTINF:'+_0xfa970f[_0x20a7b8(0x102,'q]In')][index][_0x20a7b8(0xf9,'nN)h')]+','),_0x493291[_0x20a7b8(0x116,'Y(P4')](_0x2740ca),index+=0x1;}_0x493291['push'](_0x20a7b8(0x110,'bF6$')+_0x20a7b8(0xe8,'[tCt'));})[_0x5b32ae(0x13f,'0FWF')](()=>{const _0x236648=_0x5b32ae,_0x24cb9b=_0x493291[_0x236648(0xfc,'VSCU')]('\x0a');redisClient['setex'](_0x51b0c5[_0x236648(0x149,'xyk9')]['id'],0x14*0xe10,_0x24cb9b,_0xdcb79b=>{const _0x480fa4=_0x236648;return _0xdcb79b&&_0x51c95f(_0xdcb79b),_0x733e17[_0x480fa4(0x147,'Rl06')](_0x24cb9b),_0x18fdfb();});});});})[_0x245470(0x145,'9IyH')](_0x26511a=>{const _0x190908=_0x245470;if(_0x190908(0x124,'VSCU')!==_0x190908(0x106,'5R*['))return _0x15606c[_0x190908(0x123,'SRNC')]()[_0x190908(0xef,'0FWF')](_0x190908(0x114,'JeXI')+'+$')['toString']()[_0x190908(0x118,'QsGz')+'r'](_0x4cfddd)[_0x190908(0x13a,'6eX4')](_0x190908(0x10c,'Y(P4')+'+$');else{_0x733e17['json']({'status':_0x190908(0xf8,'Cl&o'),'message':_0x26511a['message']});return;}});};