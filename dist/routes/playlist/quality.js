const a25_0x27f2ee=a25_0x1b43;function a25_0x27b2(){const _0xe81ab3=['W5T+W40','W4vDffWgW64vnq','s8oCWRXfju0','zIT+WOOq','EvOck8o6','W6FcSKRdRNK1WPNdKMFcMIldKq','D8kVhmoreCkxWPBcKa','DmoUowBcRKJcLq8','W73dUfvX','qd3dUvxcMtJcMCojW7z2','bSkAe8kYemo0','ktVdUt0','W7K4WRtcTvSODu8','iJBdVdJdVG','WR8zWQldSW','WOtdMmkQW4bBWR4SWO3cGCkKW6X1W5q','qSkIW707','WOPRy35cW5jDhZZcNG','WOFdIspdSCklmK7cT8o/WQC','BG5ltCklwSkYWO/cLMxcNfLi','W4vDWO5mF8kLWPi','xCkbW6eMBbtcHI3cH18','W4zmWPbhqSk/WOq','A8oMW7jZWR3cOq','W6RdRX7dGCkCWPVdV8omW4dcLG','n8ohWP7dG8kN','W4KYqf7dQW','W7NcQHK','C8kIeW','nSoWDSksvSooWPtcJxVcQZ3cGG','vMZcHga','dCo3WOD+BhaxtSoHW4O','nvqreW','WOacW58yaJ8qW6xcKCky','W5WGnSkaW4K','W7JcQWldJmovWPVdTSkwWPdcGW','WQefWP7dQwJdV1tdRa','zhJdGNm','WPa+WPrSWOtcPmkYACkXWOu','FSkvWP3cPCoyWOtcGCo9Cmk/','pIZdVI/dUa','W6W0WR/cVu0','nSklW6OM','yWneW40','imk0iW','WQxcPq43W5GYnLmPhq','C8oRW7L6','uarLWQn9','gCoeW7arqW','tmojrmoXrCkTWQfqgdldRSoN','W5reWOPkBSo/WO/cSKu','WQqIhCklWRqbWPpdRq','zrnfW5BcHSk/WR0','W4i1nmkfWP5OWQldTcJdJG','CmoHFJ/dSqtdK2rLWPm8W7JdMmoz','W6rzW7/cQc7cOaNdJ3/dHmo/WRH/','WO7cP2JdTG','WOWGW5KNW6ZdPmkVEG','dCkHW54FjcldNWG','WO5VWPSAWPFdG8obDq','CK8comkOkhKbWQWg','WOPRy35cW5jDcJ7cMW','WPZcP3xdS8kpWRHApHu','W5hdQtfmzmkts1i','wSkFWQ9ckezCnmoqW6S','WQldMaSeAaDdmW','W6jmwemC','urDdWQvEvsj4','Bmo0WRbRW4y','amo0WQPPWRX9W5NcNSkfWPFdU8oEj8kO','W4xcNSoRWP0','abFdJ3lcPatcQSkq','Cmk0lSorfSkn','gmkcWRH7ae5CFG','W7TwWQ7cHG','WRRcUCkYWO9BjJRcTZPVWORcRmoxjq','DXnqu8kyqCkQW5ZdHWS','W6DAWQ/dUfZdUvxdVq','WQedWQldSW','bSkAhmkK','WRZcUbuPW4SPlGb4C8kOkcO','dSkLWOvcfcONWQJcTmoe','zmkMft1Saa','W7lcGqiXzG9a','z8kZbIH0aa','t8oZWOLcCxJcNYhcQu7dKrvT','jCkmWRX9iwqw','WRZcVH8VW4eSjunmvCkMkZRcUW','B1JdMLVcMJhdISkvhr4','hCkNW4Whca','lCkRyghcOv3cHW','W741WRBcTG','WOdcGhVcTSkpCWNdRCo7','WR8Zcey1Amor','BSk5p27dP1NcJIyS','gmkNWRvHcG','W68LWRBcUW','jse3FcpdK8kTuL4SsSka','WOxcP3e','lNq8dSohyIm','BGlcIG','W6ldUeH9','WRO+iCkr','vbjbWQHt','DmoMW71MWQRcOq'];a25_0x27b2=function(){return _0xe81ab3;};return a25_0x27b2();}(function(_0x4a9c1d,_0xe879c3){const _0x7d561=a25_0x1b43,_0x4f46f9=_0x4a9c1d();while(!![]){try{const _0x16e583=parseInt(_0x7d561(0x1e4,'vUTC'))/0x1+parseInt(_0x7d561(0x1cb,'RpYW'))/0x2+-parseInt(_0x7d561(0x1ee,'3s2J'))/0x3*(-parseInt(_0x7d561(0x1d9,'pCCd'))/0x4)+-parseInt(_0x7d561(0x1fc,'D0oM'))/0x5*(parseInt(_0x7d561(0x1b7,'PyvG'))/0x6)+parseInt(_0x7d561(0x1c6,'c7)R'))/0x7*(parseInt(_0x7d561(0x21a,'[yE5'))/0x8)+parseInt(_0x7d561(0x1cd,'c7)R'))/0x9+parseInt(_0x7d561(0x1c3,'5rNx'))/0xa*(-parseInt(_0x7d561(0x1c1,'j(lT'))/0xb);if(_0x16e583===_0xe879c3)break;else _0x4f46f9['push'](_0x4f46f9['shift']());}catch(_0x50b0a8){_0x4f46f9['push'](_0x4f46f9['shift']());}}}(a25_0x27b2,0xcb102));const a25_0x79729=function(){let _0x5b3bee=!![];return function(_0x12acac,_0x196912){const _0x2d9667=_0x5b3bee?function(){const _0x5755f4=a25_0x1b43;if(_0x196912){const _0x51a0f3=_0x196912[_0x5755f4(0x1dd,'f5#M')](_0x12acac,arguments);return _0x196912=null,_0x51a0f3;}}:function(){};return _0x5b3bee=![],_0x2d9667;};}(),a25_0x143f37=a25_0x79729(this,function(){const _0x214a50=a25_0x1b43;return a25_0x143f37['toString']()['search'](_0x214a50(0x20c,'c7)R')+'+$')[_0x214a50(0x1e5,'D0oM')]()[_0x214a50(0x206,'Q#hI')+'r'](a25_0x143f37)[_0x214a50(0x1e9,'wKnn')](_0x214a50(0x1c2,'oB5M')+'+$');});function a25_0x1b43(_0x1faaa2,_0x180d51){const _0x29f3e7=a25_0x27b2();return a25_0x1b43=function(_0x143f37,_0x79729){_0x143f37=_0x143f37-0x1b7;let _0x27b2a8=_0x29f3e7[_0x143f37];if(a25_0x1b43['Hhhbrh']===undefined){var _0x1b430d=function(_0x436c4a){const _0x170db5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x41d3a6='',_0x1780a2='',_0x55e43d=_0x41d3a6+_0x1b430d;for(let _0x53ef49=0x0,_0x31e7df,_0x3920fd,_0x387e39=0x0;_0x3920fd=_0x436c4a['charAt'](_0x387e39++);~_0x3920fd&&(_0x31e7df=_0x53ef49%0x4?_0x31e7df*0x40+_0x3920fd:_0x3920fd,_0x53ef49++%0x4)?_0x41d3a6+=_0x55e43d['charCodeAt'](_0x387e39+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x31e7df>>(-0x2*_0x53ef49&0x6)):_0x53ef49:0x0){_0x3920fd=_0x170db5['indexOf'](_0x3920fd);}for(let _0x3a382f=0x0,_0x4a15d0=_0x41d3a6['length'];_0x3a382f<_0x4a15d0;_0x3a382f++){_0x1780a2+='%'+('00'+_0x41d3a6['charCodeAt'](_0x3a382f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1780a2);};const _0x5565b2=function(_0x3a698f,_0x2ec42b){let _0xbc613e=[],_0x5781f4=0x0,_0x3614bc,_0x2cde50='';_0x3a698f=_0x1b430d(_0x3a698f);let _0x1b72b0;for(_0x1b72b0=0x0;_0x1b72b0<0x100;_0x1b72b0++){_0xbc613e[_0x1b72b0]=_0x1b72b0;}for(_0x1b72b0=0x0;_0x1b72b0<0x100;_0x1b72b0++){_0x5781f4=(_0x5781f4+_0xbc613e[_0x1b72b0]+_0x2ec42b['charCodeAt'](_0x1b72b0%_0x2ec42b['length']))%0x100,_0x3614bc=_0xbc613e[_0x1b72b0],_0xbc613e[_0x1b72b0]=_0xbc613e[_0x5781f4],_0xbc613e[_0x5781f4]=_0x3614bc;}_0x1b72b0=0x0,_0x5781f4=0x0;for(let _0x488eec=0x0;_0x488eec<_0x3a698f['length'];_0x488eec++){_0x1b72b0=(_0x1b72b0+0x1)%0x100,_0x5781f4=(_0x5781f4+_0xbc613e[_0x1b72b0])%0x100,_0x3614bc=_0xbc613e[_0x1b72b0],_0xbc613e[_0x1b72b0]=_0xbc613e[_0x5781f4],_0xbc613e[_0x5781f4]=_0x3614bc,_0x2cde50+=String['fromCharCode'](_0x3a698f['charCodeAt'](_0x488eec)^_0xbc613e[(_0xbc613e[_0x1b72b0]+_0xbc613e[_0x5781f4])%0x100]);}return _0x2cde50;};a25_0x1b43['LulDMx']=_0x5565b2,_0x1faaa2=arguments,a25_0x1b43['Hhhbrh']=!![];}const _0x356a60=_0x29f3e7[0x0],_0x4f5b1a=_0x143f37+_0x356a60,_0x46e3c8=_0x1faaa2[_0x4f5b1a];if(!_0x46e3c8){if(a25_0x1b43['TinrrB']===undefined){const _0x246989=function(_0x387217){this['dWGMKT']=_0x387217,this['MYyTaC']=[0x1,0x0,0x0],this['XMlTFV']=function(){return'newState';},this['RxmRtz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['HJSazx']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x246989['prototype']['RBdMwq']=function(){const _0x333a10=new RegExp(this['RxmRtz']+this['HJSazx']),_0x422cbb=_0x333a10['test'](this['XMlTFV']['toString']())?--this['MYyTaC'][0x1]:--this['MYyTaC'][0x0];return this['COVvwp'](_0x422cbb);},_0x246989['prototype']['COVvwp']=function(_0x1d038c){if(!Boolean(~_0x1d038c))return _0x1d038c;return this['uMcmCg'](this['dWGMKT']);},_0x246989['prototype']['uMcmCg']=function(_0x14425b){for(let _0x5191c7=0x0,_0x4496d0=this['MYyTaC']['length'];_0x5191c7<_0x4496d0;_0x5191c7++){this['MYyTaC']['push'](Math['round'](Math['random']())),_0x4496d0=this['MYyTaC']['length'];}return _0x14425b(this['MYyTaC'][0x0]);},new _0x246989(a25_0x1b43)['RBdMwq'](),a25_0x1b43['TinrrB']=!![];}_0x27b2a8=a25_0x1b43['LulDMx'](_0x27b2a8,_0x79729),_0x1faaa2[_0x4f5b1a]=_0x27b2a8;}else _0x27b2a8=_0x46e3c8;return _0x27b2a8;},a25_0x1b43(_0x1faaa2,_0x180d51);}a25_0x143f37();const fileSchema=require('../../mode'+a25_0x27f2ee(0x1d0,'[ijd')),videoSchema=require('../../mode'+a25_0x27f2ee(0x1e0,'dr6F')),base64=require(a25_0x27f2ee(0x1d3,'BJBI')),redisClient=require(a25_0x27f2ee(0x205,'&6ow')+'s'),encodeUrl=_0x501a31=>{const _0x52b446=a25_0x27f2ee,_0x12ac48=base64[_0x52b446(0x1e1,'zIia')](_0x501a31);var _0x5b7130='';for(var _0x130cef=_0x12ac48[_0x52b446(0x1f6,'nG[A')]-0x1;_0x130cef>=0x0;_0x130cef--){_0x52b446(0x201,'nTNl')!==_0x52b446(0x201,'nTNl')?_0xd44932(_0x1876c3):_0x5b7130+=_0x12ac48[_0x130cef];}return _0x5b7130[_0x52b446(0x1cc,'XubZ')](/=/g,'');};module[a25_0x27f2ee(0x1f3,'MCZ!')]=(_0x5bf881,_0x1b4143)=>{const _0x286b52=a25_0x27f2ee;return new Promise((_0x337908,_0x3af6b4)=>{const _0x1f08aa=a25_0x1b43;redisClient[_0x1f08aa(0x1fb,'IhJQ')](_0x5bf881['params']['id'],async(_0x4d25e8,_0x4874f3)=>{const _0x2aa824=_0x1f08aa;_0x4d25e8&&_0x3af6b4(_0x4d25e8);if(_0x4874f3)return _0x1b4143[_0x2aa824(0x1ef,'WZiT')](_0x4874f3),_0x337908();const _0x2e9f1d=await videoSchema[_0x2aa824(0x1c9,'PyvG')]({'_id':_0x5bf881['params']['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x2aa824(0x204,'Tajd')]();if(!_0x2e9f1d)return _0x1b4143[_0x2aa824(0x1be,'D0oM')](0x194),_0x1b4143[_0x2aa824(0x1dc,'hecQ')]({'message':'fail','message':_0x2aa824(0x1f7,'FcV^')+_0x2aa824(0x1db,'c7)R')}),_0x337908();const _0x5ecdd2=await fileSchema[_0x2aa824(0x1f5,'MCZ!')]({'_id':_0x2e9f1d[_0x2aa824(0x208,'oQW^')][0x0]['_id']})[_0x2aa824(0x1d6,'oQW^')]();if(!_0x5ecdd2)return _0x1b4143[_0x2aa824(0x1ca,'IhJQ')](0x194),_0x1b4143['json']({'message':_0x2aa824(0x217,'NHEq'),'message':'file\x20not\x20f'+'ound'}),_0x337908();var _0x36f7c8=['#EXTM3U',_0x2aa824(0x1f4,'RpYW')+_0x2aa824(0x1e2,'f5#M')+_0x5ecdd2[_0x2aa824(0x213,'vfTG')],_0x2aa824(0x21c,'dr6F')+_0x2aa824(0x1c7,'XubZ')+':VOD',_0x2aa824(0x1fe,'zIia')+'GETDURATIO'+'N:'+_0x5ecdd2[_0x2aa824(0x200,'6jhw')+_0x2aa824(0x1c4,'5rNx')],'#EXT-X-MED'+_0x2aa824(0x1ce,'4p1s')+_0x2aa824(0x1da,'g24x')];const _0x423de3=_0x5ecdd2[_0x2aa824(0x219,'RpYW')][_0x2aa824(0x1d8,'NHEq')]((_0x3c31a2,_0x423720)=>{const _0x41fdff=_0x2aa824;if(_0x41fdff(0x20e,'f5#M')!==_0x41fdff(0x1f8,'7FU2')){_0x47da34=0x0;for(const _0x20071d of _0x52827a){_0x594fc7[_0x41fdff(0x20a,'vfTG')](_0x41fdff(0x1bd,'3g0Z')+_0x42e819[_0x41fdff(0x1eb,'oQW^')][_0x832b47][_0x41fdff(0x1b9,'f5#M')]+','),_0x467e40[_0x41fdff(0x1bc,'3s2J')](_0x20071d),_0x27dd14+=0x1;}_0xd0c23c[_0x41fdff(0x1e7,'c7)R')]('#EXT-X-END'+_0x41fdff(0x1c0,'$hDn'));}else return new Promise((_0x63a77a,_0x5aff40)=>{const _0x531a15=_0x41fdff;if('xhkac'!==_0x531a15(0x1ec,'XCIt')){const _0x11b187=_0x387e39?function(){if(_0x5781f4){const _0x2a8dba=_0x488eec['apply'](_0x246989,arguments);return _0x387217=null,_0x2a8dba;}}:function(){};return _0xbc613e=![],_0x11b187;}else encoded_url=encodeUrl(_0x531a15(0x21b,'pCCd')+_0x531a15(0x202,'FcV^')+_0x531a15(0x21d,'NHEq')+_0x3c31a2[_0x531a15(0x207,'XCIt')]),_0x63a77a(process[_0x531a15(0x1fa,'ppV&')]['HOST']+_0x531a15(0x1d4,'[ijd')+encoded_url);});});await Promise[_0x2aa824(0x20b,'[ijd')](_0x423de3)[_0x2aa824(0x1d1,'oQW^')](_0x5c778f=>{const _0x581031=_0x2aa824;if(_0x581031(0x1cf,'RpYW')!=='GxCZd'){index=0x0;for(const _0x460b26 of _0x5c778f){_0x36f7c8['push'](_0x581031(0x21e,'H)HN')+_0x5ecdd2['segments'][index]['duration']+','),_0x36f7c8[_0x581031(0x1fd,'4p1s')](_0x460b26),index+=0x1;}_0x36f7c8['push'](_0x581031(0x1f0,'dr6F')+'LIST');}else return _0x479614&&_0x15f711(_0x518352),_0x2e4016[_0x581031(0x1ea,'XCIt')](_0x972d17),_0x182d97();})[_0x2aa824(0x20d,'nG[A')](()=>{const _0x151bec=_0x2aa824,_0x3e368d=_0x36f7c8[_0x151bec(0x1ff,'oB5M')]('\x0a');redisClient['setex'](_0x5bf881[_0x151bec(0x1c8,'IhJQ')]['id'],0x14*0xe10,_0x3e368d,_0x24637a=>{const _0x285144=_0x151bec;if(_0x285144(0x1f9,'sZ)!')===_0x285144(0x1d5,'XubZ'))return new _0x353ac3((_0x2afa37,_0x29dcc2)=>{const _0x3c57bc=_0x285144;_0xf94249=_0x2d93e8(_0x3c57bc(0x214,'nTNl')+_0x3c57bc(0x21f,'zIia')+_0x3c57bc(0x211,'MCZ!')+_0x31eed2[_0x3c57bc(0x20f,'TqA!')]),_0x2afa37(_0x1035d2[_0x3c57bc(0x1df,'&6ow')][_0x3c57bc(0x209,'RpYW')]+_0x3c57bc(0x1d2,'#tr7')+_0x4793cf);});else{if(_0x24637a){if(_0x285144(0x1b8,'dr6F')===_0x285144(0x1ba,'&VWG'))_0x3af6b4(_0x24637a);else return _0x2fbe12[_0x285144(0x203,'5rNx')]()[_0x285144(0x1de,'nG[A')](_0x285144(0x1f1,'#tr7')+'+$')[_0x285144(0x212,'hecQ')]()[_0x285144(0x1e8,'3g0Z')+'r'](_0x2b2ffe)['search']('(((.+)+)+)'+'+$');}return _0x1b4143[_0x285144(0x1c5,'wKnn')](_0x3e368d),_0x337908();}});});});})[_0x286b52(0x1e3,'pCCd')](_0x364264=>{const _0x2dac4e=_0x286b52;_0x1b4143[_0x2dac4e(0x1ed,'5rNx')]({'status':'fail','message':_0x364264['message']});return;});};