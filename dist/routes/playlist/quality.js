const a20_0x113c07=a20_0x1f01;(function(_0x5a0fac,_0x3b0a9a){const _0xdf0c13=a20_0x1f01,_0x4a5ae5=_0x5a0fac();while(!![]){try{const _0x56adbe=parseInt(_0xdf0c13(0x203,'lPk!'))/0x1+-parseInt(_0xdf0c13(0x20c,'GCf('))/0x2+-parseInt(_0xdf0c13(0x1e6,'V09m'))/0x3*(-parseInt(_0xdf0c13(0x1ef,'g3M0'))/0x4)+parseInt(_0xdf0c13(0x20f,'GCf('))/0x5*(parseInt(_0xdf0c13(0x1c8,'BN3K'))/0x6)+-parseInt(_0xdf0c13(0x1f3,'oL8J'))/0x7+parseInt(_0xdf0c13(0x1dc,'oL8J'))/0x8*(parseInt(_0xdf0c13(0x1c4,'DEWM'))/0x9)+-parseInt(_0xdf0c13(0x1cc,'DEWM'))/0xa*(-parseInt(_0xdf0c13(0x1e7,'(M&I'))/0xb);if(_0x56adbe===_0x3b0a9a)break;else _0x4a5ae5['push'](_0x4a5ae5['shift']());}catch(_0xf3952){_0x4a5ae5['push'](_0x4a5ae5['shift']());}}}(a20_0x51ef,0x8c287));const a20_0x9cfa91=function(){let _0x1b5d6b=!![];return function(_0x534182,_0x1bd50a){const _0x7bc858=_0x1b5d6b?function(){const _0x57a467=a20_0x1f01;if(_0x1bd50a){if(_0x57a467(0x1f1,'BN3K')!==_0x57a467(0x1fc,'V09m'))_0x1c5611=_0x4d1583(_0x177491['drive']),_0x20c17f(_0x5caba8[_0x57a467(0x1e9,'WO[v')][_0x57a467(0x1ed,'f[uW')]+_0x57a467(0x1ce,'wI$N')+_0x3110f7);else{const _0xd99007=_0x1bd50a[_0x57a467(0x20e,'G]IU')](_0x534182,arguments);return _0x1bd50a=null,_0xd99007;}}}:function(){};return _0x1b5d6b=![],_0x7bc858;};}(),a20_0x13fe86=a20_0x9cfa91(this,function(){const _0x118cdf=a20_0x1f01;return a20_0x13fe86[_0x118cdf(0x1d3,'(M&I')]()[_0x118cdf(0x1c1,'V09m')](_0x118cdf(0x1d6,'Vg]C')+'+$')['toString']()[_0x118cdf(0x1f9,'E$zx')+'r'](a20_0x13fe86)[_0x118cdf(0x1c3,'61t)')](_0x118cdf(0x1de,'R#AF')+'+$');});function a20_0x51ef(){const _0x28cb2c=['bSkRnmoHfG','W7nQgH0','W5/dH8o5y3ycnCoRac9aW7CD','oGjKWPhdSa','tSkhW6dcSa','j8oLWOCN','W5PvosxcIG','W5ldKa3dRLtcKCkJgSo9dG','W5HkjZRcH8kvd8oPp8oQ','W53cKHz+tmkFW4z2WOBcNW','WP3dO8kgW6zeWPpcRmktuXS','WOJcGg44W4q','WRJcVgLwd1KX','jSo7WPRdHW','WRCiW5ji','y8kiWO7dHIOIW4dcICkEWPn9fbe','WR/cSb7cRG','i8kBWP3dUsbeWPfEF3O','W5eCW7ePWQRdQsSiWQ1utSowWR0','uuuoyG','D8o1WPmiW49oWQ4','WRlcG8oLW4/dOa','dCozWQddPqi','uCkmBLO','W51mjY3cVmkjhW','oWtcV8ox','WOatsCkD','WPNdKCkzow8NWRTeW7eIW6VdGmoi','W4L3dCknW68VemosWRNcLa','tLGJW5pcRq','WP3cGmoErqLvW6O','aJvRWR4','fCkzzHLzW4WIW5atFa','s3eCWQpcTmorqW','u8kKtIigW6b8','WPldJ1pcUX7cLCoFWPxcG2e','WO7cR0KnW4an','WOJcK8oPWODEW73cTmkxAb9HW4bF','DMRcTWa9W5W','zZBdQSkkWPzZWPH1amkyhq','W43cP8oqW6RdHG','W4FdHmoxW6ldVfWEW7e','kSo1WPRdHq','rSors8ksr3VdQ8oiWPOrkW','shyrWQJcN8oA','WOZcI1hcQa','WRdcT3hcLa','ztldQCkkWPWdW7PJd8k2iqFdQq','kMeWrq','FSoqW43dL8kFW5RdUd0x','WQWuW5nc','W5/cU3RcLdpdSmkitW','W7S4W6r4W70vW5CJW6DZ','W4ZcMSogFZK','sSkwu0RdL8kEW5C/','W549WQySo8k5','lmkifG','g8oUWQnQW5C0bSkBWQyQ','W5RcLGn0tmkfW7zW','a8oSb3LcW7HhW5KKtmkx','WR3cS3hcJcm','W5VdLmkV','dSkhWO8RWPddNtVdPa','W5JdISo/ycryt8o7drO','iCo1WOm','amooWQhdSSopWRhcPSknDmo+','jXHOWQ7dGG','WO4+WPpdKt/dKvWEW5W','W5RcHWvTxmky','kmoUWO0Q','WPjjWRf1W7/cVxS','bmkDW4W4W5NdLZhdVWxcLa','W5a5WRSUySoNW4q','W47cH3W8W48kya','dmolsf/dTmkTW6WB','eCkaW4ePWOZdIG','kGlcRa','W6RcUe7dMwJdVmk+WRhcQhFcMhhdTW','WRPQWQ5xy1/cS8otW6tcU2jOWP0','WOBcOt0','i1WsCG','WPRcG8kcjHP6dCkd','W4xcHuClWRyIWPZdOvLwW7ZdI2u','W43dOwqrCxDRa8oimG'];a20_0x51ef=function(){return _0x28cb2c;};return a20_0x51ef();}a20_0x13fe86();function a20_0x1f01(_0x2ffbf6,_0x1b909c){const _0x21ac72=a20_0x51ef();return a20_0x1f01=function(_0x13fe86,_0x9cfa91){_0x13fe86=_0x13fe86-0x1bf;let _0x51ef07=_0x21ac72[_0x13fe86];if(a20_0x1f01['QnTxGQ']===undefined){var _0x1f013d=function(_0x28a49d){const _0x56afcd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x231a6f='',_0x2babd4='',_0x46a01c=_0x231a6f+_0x1f013d;for(let _0x11125a=0x0,_0x43601f,_0xb4dc41,_0x3f8ad1=0x0;_0xb4dc41=_0x28a49d['charAt'](_0x3f8ad1++);~_0xb4dc41&&(_0x43601f=_0x11125a%0x4?_0x43601f*0x40+_0xb4dc41:_0xb4dc41,_0x11125a++%0x4)?_0x231a6f+=_0x46a01c['charCodeAt'](_0x3f8ad1+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x43601f>>(-0x2*_0x11125a&0x6)):_0x11125a:0x0){_0xb4dc41=_0x56afcd['indexOf'](_0xb4dc41);}for(let _0x12e92b=0x0,_0x5bc4f2=_0x231a6f['length'];_0x12e92b<_0x5bc4f2;_0x12e92b++){_0x2babd4+='%'+('00'+_0x231a6f['charCodeAt'](_0x12e92b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2babd4);};const _0x5c08ae=function(_0x21b356,_0x3d795e){let _0xb865b3=[],_0x4f7d08=0x0,_0x3560da,_0x4d86d1='';_0x21b356=_0x1f013d(_0x21b356);let _0x39beed;for(_0x39beed=0x0;_0x39beed<0x100;_0x39beed++){_0xb865b3[_0x39beed]=_0x39beed;}for(_0x39beed=0x0;_0x39beed<0x100;_0x39beed++){_0x4f7d08=(_0x4f7d08+_0xb865b3[_0x39beed]+_0x3d795e['charCodeAt'](_0x39beed%_0x3d795e['length']))%0x100,_0x3560da=_0xb865b3[_0x39beed],_0xb865b3[_0x39beed]=_0xb865b3[_0x4f7d08],_0xb865b3[_0x4f7d08]=_0x3560da;}_0x39beed=0x0,_0x4f7d08=0x0;for(let _0x560ef2=0x0;_0x560ef2<_0x21b356['length'];_0x560ef2++){_0x39beed=(_0x39beed+0x1)%0x100,_0x4f7d08=(_0x4f7d08+_0xb865b3[_0x39beed])%0x100,_0x3560da=_0xb865b3[_0x39beed],_0xb865b3[_0x39beed]=_0xb865b3[_0x4f7d08],_0xb865b3[_0x4f7d08]=_0x3560da,_0x4d86d1+=String['fromCharCode'](_0x21b356['charCodeAt'](_0x560ef2)^_0xb865b3[(_0xb865b3[_0x39beed]+_0xb865b3[_0x4f7d08])%0x100]);}return _0x4d86d1;};a20_0x1f01['GSIsAT']=_0x5c08ae,_0x2ffbf6=arguments,a20_0x1f01['QnTxGQ']=!![];}const _0x5dca8c=_0x21ac72[0x0],_0x55b51f=_0x13fe86+_0x5dca8c,_0x551904=_0x2ffbf6[_0x55b51f];if(!_0x551904){if(a20_0x1f01['ByLlkB']===undefined){const _0x13ab5f=function(_0x363c40){this['lohUxa']=_0x363c40,this['drWYzn']=[0x1,0x0,0x0],this['uyaMWq']=function(){return'newState';},this['VreAvx']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['FhrQXE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x13ab5f['prototype']['ZcdAJS']=function(){const _0x444154=new RegExp(this['VreAvx']+this['FhrQXE']),_0x4fd8a5=_0x444154['test'](this['uyaMWq']['toString']())?--this['drWYzn'][0x1]:--this['drWYzn'][0x0];return this['bEFFPJ'](_0x4fd8a5);},_0x13ab5f['prototype']['bEFFPJ']=function(_0x5a1a77){if(!Boolean(~_0x5a1a77))return _0x5a1a77;return this['LJyYQg'](this['lohUxa']);},_0x13ab5f['prototype']['LJyYQg']=function(_0x41582c){for(let _0x3145ed=0x0,_0x5278ec=this['drWYzn']['length'];_0x3145ed<_0x5278ec;_0x3145ed++){this['drWYzn']['push'](Math['round'](Math['random']())),_0x5278ec=this['drWYzn']['length'];}return _0x41582c(this['drWYzn'][0x0]);},new _0x13ab5f(a20_0x1f01)['ZcdAJS'](),a20_0x1f01['ByLlkB']=!![];}_0x51ef07=a20_0x1f01['GSIsAT'](_0x51ef07,_0x9cfa91),_0x2ffbf6[_0x55b51f]=_0x51ef07;}else _0x51ef07=_0x551904;return _0x51ef07;},a20_0x1f01(_0x2ffbf6,_0x1b909c);}const fileSchema=require(a20_0x113c07(0x1f8,'3okh')+'ls/file'),videoSchema=require(a20_0x113c07(0x1f0,'6PTc')+a20_0x113c07(0x1db,'szdu')),base64=require(a20_0x113c07(0x1e5,'12bC')),redisClient=require('../../redi'+'s'),encodeUrl=_0x37301f=>{const _0x4ca7f7=a20_0x113c07,_0x32b776=base64[_0x4ca7f7(0x1c9,'p^5k')](_0x37301f);var _0x500840='';for(var _0x58efb8=_0x32b776[_0x4ca7f7(0x1d4,'12bC')]-0x1;_0x58efb8>=0x0;_0x58efb8--){_0x500840+=_0x32b776[_0x58efb8];}return _0x500840[_0x4ca7f7(0x1e3,'lPk!')](/=/g,'');};module[a20_0x113c07(0x1bf,'93bn')]=(_0xfe2dc3,_0x372d28)=>{return new Promise((_0x2fe990,_0x3b9003)=>{const _0x39d5f3=a20_0x1f01;if(_0x39d5f3(0x1df,'@SMW')!=='VHmtp'){const _0x197000=_0x25d3a6['apply'](_0x3e8be1,arguments);return _0x2eebaa=null,_0x197000;}else redisClient['get'](_0xfe2dc3['params']['id'],async(_0x15a930,_0x6887a4)=>{const _0x3c069c=_0x39d5f3;if('JNxqk'!==_0x3c069c(0x206,'ukgW')){if(_0x15a930){if('DzVCY'!==_0x3c069c(0x1f4,'@SMW'))_0x3b9003(_0x15a930);else{if(_0xe691ae){const _0x2d98ee=_0x21d391[_0x3c069c(0x1f7,'E$zx')](_0x3d1e06,arguments);return _0x5e2a91=null,_0x2d98ee;}}}if(_0x6887a4)return _0x372d28['send'](_0x6887a4),_0x2fe990();const _0x44eaa5=await videoSchema[_0x3c069c(0x209,'E$zx')]({'_id':_0xfe2dc3['params']['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x3c069c(0x1f6,'@xMT')]();if(!_0x44eaa5)return _0x372d28[_0x3c069c(0x1e8,'szdu')](0x194),_0x372d28['json']({'message':_0x3c069c(0x1c7,'45*r'),'message':_0x3c069c(0x1e4,'szdu')+'ound'}),_0x2fe990();const _0x8974f4=await fileSchema[_0x3c069c(0x212,'p^5k')]({'_id':_0x44eaa5['files'][0x0][_0x3c069c(0x1d5,'BN3K')]})['exec']();if(!_0x8974f4)return _0x372d28['status'](0x194),_0x372d28['json']({'message':'fail','message':'file\x20not\x20f'+_0x3c069c(0x1ff,'u*S^')}),_0x2fe990();var _0x2e0174=[_0x3c069c(0x1fd,'mm&E'),'#EXT-X-VER'+_0x3c069c(0x1c5,']*Qm')+_0x8974f4['version'],_0x3c069c(0x1fb,'t3mK')+'YLIST-TYPE'+_0x3c069c(0x204,'f[uW'),'#EXT-X-TAR'+'GETDURATIO'+'N:'+_0x8974f4[_0x3c069c(0x1fa,'[EiV')+_0x3c069c(0x1cf,'u*S^')],_0x3c069c(0x211,'93bn')+_0x3c069c(0x1c0,'GD^l')+_0x3c069c(0x1da,']*Qm')];const _0x20a1d4=_0x8974f4[_0x3c069c(0x1d7,'[EiV')][_0x3c069c(0x1dd,'45*r')]((_0x48ec0a,_0x103a3a)=>{const _0x5e225d=_0x3c069c;return _0x5e225d(0x207,'45*r')===_0x5e225d(0x1d9,'3okh')?new Promise((_0xce66fd,_0x4bfb1e)=>{const _0x2a3f5c=_0x5e225d;encoded_url=encodeUrl(_0x48ec0a[_0x2a3f5c(0x1d2,'GCf(')]),_0xce66fd(process[_0x2a3f5c(0x1ec,'6PTc')][_0x2a3f5c(0x1f2,'E$zx')]+_0x2a3f5c(0x1e0,'orpx')+encoded_url);}):(_0x3fb300[_0x5e225d(0x1e1,'[EiV')](0x194),_0x40f54b[_0x5e225d(0x20b,'LqH$')]({'message':_0x5e225d(0x1f5,'R#AF'),'message':_0x5e225d(0x20d,'NAMF')+_0x5e225d(0x208,'(M&I')}),_0x335afd());});await Promise['all'](_0x20a1d4)[_0x3c069c(0x201,'5Vt@')](_0x2b2de9=>{const _0x349f3e=_0x3c069c;index=0x0;for(const _0x33ac37 of _0x2b2de9){_0x2e0174[_0x349f3e(0x1ca,'3okh')](_0x349f3e(0x1d0,'3okh')+_0x8974f4[_0x349f3e(0x1d7,'[EiV')][index][_0x349f3e(0x1ee,'1NwJ')]+','),_0x2e0174['push'](_0x33ac37),index+=0x1;}_0x2e0174['push'](_0x349f3e(0x1d1,'u*S^')+_0x349f3e(0x1cb,'3okh'));})[_0x3c069c(0x20a,'WO[v')](()=>{const _0x32eeb8=_0x3c069c,_0x1cddd5=_0x2e0174[_0x32eeb8(0x1fe,'45*r')]('\x0a');redisClient['setex'](_0xfe2dc3['params']['id'],0x14*0xe10,_0x1cddd5,_0x2b42a4=>{const _0x35f36d=_0x32eeb8;if(_0x2b42a4){if('aNWcX'!=='oOxpR')_0x3b9003(_0x2b42a4);else{const _0x2983d4=_0x3f8ad1?function(){if(_0x4f7d08){const _0x2da196=_0x560ef2['apply'](_0x13ab5f,arguments);return _0x363c40=null,_0x2da196;}}:function(){};return _0xb865b3=![],_0x2983d4;}}return _0x372d28[_0x35f36d(0x210,'@SMW')](_0x1cddd5),_0x2fe990();});});}else _0x5de338(_0x163f3f);});})['catch'](_0x248b0f=>{const _0x4df950=a20_0x1f01;_0x372d28[_0x4df950(0x1e2,'@xMT')]({'status':_0x4df950(0x1cd,'2lQj'),'message':_0x248b0f['message']});return;});};