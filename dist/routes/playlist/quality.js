const a30_0xe7fb37=a30_0x5ad9;(function(_0x13829e,_0x93ff30){const _0x47e2ce=a30_0x5ad9,_0x12641c=_0x13829e();while(!![]){try{const _0x252012=parseInt(_0x47e2ce(0xe8,'q3l('))/0x1*(parseInt(_0x47e2ce(0x110,'cBrw'))/0x2)+-parseInt(_0x47e2ce(0xbc,'l8xv'))/0x3+parseInt(_0x47e2ce(0xea,'YHG!'))/0x4*(parseInt(_0x47e2ce(0xe5,'cBrw'))/0x5)+-parseInt(_0x47e2ce(0xc3,'SSGo'))/0x6+parseInt(_0x47e2ce(0xf0,'SSGo'))/0x7*(parseInt(_0x47e2ce(0xbd,'q3l('))/0x8)+parseInt(_0x47e2ce(0xbf,'Y8N('))/0x9+-parseInt(_0x47e2ce(0xd6,'%kw1'))/0xa;if(_0x252012===_0x93ff30)break;else _0x12641c['push'](_0x12641c['shift']());}catch(_0x150966){_0x12641c['push'](_0x12641c['shift']());}}}(a30_0x15bd,0x744c7));const a30_0x11fcf4=function(){let _0x3c4737=!![];return function(_0x11844f,_0x3d5eb7){const _0x2af526=a30_0x5ad9;if(_0x2af526(0x109,'rl]q')===_0x2af526(0xc1,'z$7d')){const _0x316a53=_0x3c4737?function(){if(_0x3d5eb7){const _0x3a60d8=_0x3d5eb7['apply'](_0x11844f,arguments);return _0x3d5eb7=null,_0x3a60d8;}}:function(){};return _0x3c4737=![],_0x316a53;}else return _0x1f5757[_0x2af526(0xe3,'2@Xk')]()['search'](_0x2af526(0xe9,'39KZ')+'+$')[_0x2af526(0xfb,'fL*x')]()[_0x2af526(0x10c,'7N4W')+'r'](_0x19ad4f)[_0x2af526(0xe1,'zXqC')](_0x2af526(0xcd,'zULe')+'+$');};}(),a30_0x4fea15=a30_0x11fcf4(this,function(){const _0x39e258=a30_0x5ad9;return a30_0x4fea15['toString']()[_0x39e258(0xe7,'69PK')]('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](a30_0x4fea15)[_0x39e258(0xdd,'OXX*')](_0x39e258(0xba,'69PK')+'+$');});a30_0x4fea15();function a30_0x15bd(){const _0x9238b=['WPxdSLlcMa','C8kPcCoR','bmkDeSkCAuSZDYRcICkhCCof','rsfHWQTOm0hdSgpcJq','W5v2ymony8oMW7ddH8od','WPvIFSoa','y8otWQlcKdqcWRVdVCk4WPa','WRRcLbvtW6S','huldRsXwDYNdHmo5W5WsvG','xeCNtsRcLYXqWOz4AIxcMa','dbvHf3C','W6dcQCorW4m/tfNcRGpcU8oGW7S','gXXWgG','q2O8WQVcOa','W73cQI4/nmoig2ldLmoCCatcUa','W44GiCktE8k4WQJdSSk8WOZdG8ohWPe','lSkEwahdUcLMnq','qNpcL8kPWQFdTdlcRq','l1v8WOtcT8kY','WROne8o2','W5vHCqzylWaXuu0','pLZdTs8','qH8cW6TMkLJcTsOkW7VdSq','EConWRNcIY8tWQdcOSowW5DPWPNdQa','WOP2ySofiCo9','mCoaWOWln2KoW43cKSoC','ASk/aCoOt8k3WOZcQa','WRFdTmkp','vXxcTNa','cWfNfwVdH3fZ','h19EWQuZ','h246W6WLmKldUNm','hYVdNNa','WRlcJSkEW7W','W4tdLvTdz2JcSc7dMGddO8oHpq','hColeva+','jeuenW','uG/dP03dSG','W77cKmkximkEjb/dNvie','W5WXFCoi','FZZdSsFdRa','W4xcNCocW6nlFa','gCkmWQrjoq','yCk/W6NdRGHOWR8','ndxcLgrnWRmhg8oKWP4WyG','CgxdHIeAW6m','rmodtmof','WOBdNSogmSoXcmkXWQ8','g046e28','W7/cReXVsmkNsfK','W4ddSLjD','omkEW6VdJhXd','xuCLqIVdHeH+WP5IDW','WPj4pmkkW45BW4f/vXa','rNtdT8oQW7RcPWZcNMuceWu','WP/cJY1B','uxnpW5pcVCkwW5u6','vNDAW5NcVCkmW6u8jwa','o8kAW7JdN3jy','W5BdRK1qWRuIWQOHcCkT','W4SJF8oJa8oyW7tdHa','W40GW6y','WOHYymoilCoTW7K','wJOEW6WpsK3dQq','AmkjctZdQI8','n8ogWOSlmM9iWOVdNCkq','W7FdMSocWQOltSkaW59+FSkeW7W','ssdcIfO8','pqNdMr/cUmo3uxhdS8kh','jCoAuMy','BCofW5rnDs5dW4RdICkg','kftdVSkqB8oUluu','W5yJo8ocWOWEWO8','lfRdN8kfCmo0','ubJcVxO','W4qxgwrbhxSxzvNdLW','W6G+WO0','qwVdUSoqWQ/dNvb3W6So','cgzukSkbW7W','tXldUfO','ySkUW7FdPtvYWQK','j8kcW4hdLvDeW6ebcca','fhzjjq','A8kndZJdVW','WQpdU3rlCG','dw5GWOyC','BfOQgIKkW5a','t8kRWP/dRG','WO/cVCk1WO/cS8oaWRddKtRdQa','FCkggdldOZK','jSoBqhP4ha','uSkYza','W73cQ09YAmkAuxu','WQK9E007FYC','WOtdKCoa','p8kAW77dL3WfW77cSCoN','qqJcVxC','iexdVWDuW5nSjmo3WQu','W6BcKCkqoa','W4dcNCorW6jbE8oR','q8o+imoVbmoGu1eZW6O','WQ4Rz1a'];a30_0x15bd=function(){return _0x9238b;};return a30_0x15bd();}function a30_0x5ad9(_0x4a3708,_0x445080){const _0x522fca=a30_0x15bd();return a30_0x5ad9=function(_0x4fea15,_0x11fcf4){_0x4fea15=_0x4fea15-0xb7;let _0x15bd70=_0x522fca[_0x4fea15];if(a30_0x5ad9['rnAMAT']===undefined){var _0x5ad9d8=function(_0x4fe8a9){const _0x4b1cef='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x44c55a='',_0x4312ed='',_0x509b48=_0x44c55a+_0x5ad9d8;for(let _0x579ab7=0x0,_0x38c188,_0xcab877,_0x599d7d=0x0;_0xcab877=_0x4fe8a9['charAt'](_0x599d7d++);~_0xcab877&&(_0x38c188=_0x579ab7%0x4?_0x38c188*0x40+_0xcab877:_0xcab877,_0x579ab7++%0x4)?_0x44c55a+=_0x509b48['charCodeAt'](_0x599d7d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x38c188>>(-0x2*_0x579ab7&0x6)):_0x579ab7:0x0){_0xcab877=_0x4b1cef['indexOf'](_0xcab877);}for(let _0x168f49=0x0,_0x52b18b=_0x44c55a['length'];_0x168f49<_0x52b18b;_0x168f49++){_0x4312ed+='%'+('00'+_0x44c55a['charCodeAt'](_0x168f49)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4312ed);};const _0x3bc30e=function(_0x3454ae,_0x8a5b67){let _0x444707=[],_0x30be14=0x0,_0xbc1721,_0x244420='';_0x3454ae=_0x5ad9d8(_0x3454ae);let _0x1932d3;for(_0x1932d3=0x0;_0x1932d3<0x100;_0x1932d3++){_0x444707[_0x1932d3]=_0x1932d3;}for(_0x1932d3=0x0;_0x1932d3<0x100;_0x1932d3++){_0x30be14=(_0x30be14+_0x444707[_0x1932d3]+_0x8a5b67['charCodeAt'](_0x1932d3%_0x8a5b67['length']))%0x100,_0xbc1721=_0x444707[_0x1932d3],_0x444707[_0x1932d3]=_0x444707[_0x30be14],_0x444707[_0x30be14]=_0xbc1721;}_0x1932d3=0x0,_0x30be14=0x0;for(let _0x9b427f=0x0;_0x9b427f<_0x3454ae['length'];_0x9b427f++){_0x1932d3=(_0x1932d3+0x1)%0x100,_0x30be14=(_0x30be14+_0x444707[_0x1932d3])%0x100,_0xbc1721=_0x444707[_0x1932d3],_0x444707[_0x1932d3]=_0x444707[_0x30be14],_0x444707[_0x30be14]=_0xbc1721,_0x244420+=String['fromCharCode'](_0x3454ae['charCodeAt'](_0x9b427f)^_0x444707[(_0x444707[_0x1932d3]+_0x444707[_0x30be14])%0x100]);}return _0x244420;};a30_0x5ad9['MWIbvJ']=_0x3bc30e,_0x4a3708=arguments,a30_0x5ad9['rnAMAT']=!![];}const _0x5b85d2=_0x522fca[0x0],_0x587a0a=_0x4fea15+_0x5b85d2,_0x41005b=_0x4a3708[_0x587a0a];if(!_0x41005b){if(a30_0x5ad9['orHwfZ']===undefined){const _0x2e1c0d=function(_0x1ac248){this['rQUEUG']=_0x1ac248,this['AUcbNE']=[0x1,0x0,0x0],this['nkYXRs']=function(){return'newState';},this['hEiUAO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['OnxuUG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2e1c0d['prototype']['PSlCFW']=function(){const _0x3447e7=new RegExp(this['hEiUAO']+this['OnxuUG']),_0x471b93=_0x3447e7['test'](this['nkYXRs']['toString']())?--this['AUcbNE'][0x1]:--this['AUcbNE'][0x0];return this['dzviMt'](_0x471b93);},_0x2e1c0d['prototype']['dzviMt']=function(_0xf861bf){if(!Boolean(~_0xf861bf))return _0xf861bf;return this['ENYJeh'](this['rQUEUG']);},_0x2e1c0d['prototype']['ENYJeh']=function(_0x42a46e){for(let _0x3fb362=0x0,_0x1b3e16=this['AUcbNE']['length'];_0x3fb362<_0x1b3e16;_0x3fb362++){this['AUcbNE']['push'](Math['round'](Math['random']())),_0x1b3e16=this['AUcbNE']['length'];}return _0x42a46e(this['AUcbNE'][0x0]);},new _0x2e1c0d(a30_0x5ad9)['PSlCFW'](),a30_0x5ad9['orHwfZ']=!![];}_0x15bd70=a30_0x5ad9['MWIbvJ'](_0x15bd70,_0x11fcf4),_0x4a3708[_0x587a0a]=_0x15bd70;}else _0x15bd70=_0x41005b;return _0x15bd70;},a30_0x5ad9(_0x4a3708,_0x445080);}const fileSchema=require(a30_0xe7fb37(0xb7,'s3eS')+a30_0xe7fb37(0xfc,'39KZ')),videoSchema=require(a30_0xe7fb37(0xf5,'zULe')+'ls/video'),base64=require('base-64'),redisClient=require('../../redi'+'s'),encodeUrl=_0x66ed6=>{const _0xd338cc=a30_0xe7fb37,_0x41ed03=base64['encode'](_0x66ed6);var _0x148942='';for(var _0x22cfe6=_0x41ed03['length']-0x1;_0x22cfe6>=0x0;_0x22cfe6--){_0xd338cc(0xf7,'l8xv')!=='mPPNZ'?_0x3e95fe(_0x4e5305):_0x148942+=_0x41ed03[_0x22cfe6];}return _0x148942['replace'](/=/g,'');};module[a30_0xe7fb37(0xdf,'ZyPm')]=(_0x1319df,_0x39a27b)=>{const _0x597e0a=a30_0xe7fb37;return new Promise((_0x31037c,_0x341fb0)=>{const _0x5bc20d=a30_0x5ad9;if(_0x5bc20d(0xde,'Bk!%')!=='UkONE')redisClient[_0x5bc20d(0x100,'2QDC')](_0x1319df[_0x5bc20d(0xf4,'sghQ')]['id'],async(_0x57175a,_0x2a2f39)=>{const _0x5b7987=_0x5bc20d;if(_0x57175a){if(_0x5b7987(0xbb,'aCWV')==='CzQdc')_0x341fb0(_0x57175a);else{const _0x243d1c=_0xa4d07[_0x5b7987(0x10d,'sghQ')](_0x34ed95);var _0x4b146c='';for(var _0x5bf86f=_0x243d1c[_0x5b7987(0x102,'PI@8')]-0x1;_0x5bf86f>=0x0;_0x5bf86f--){_0x4b146c+=_0x243d1c[_0x5bf86f];}return _0x4b146c[_0x5b7987(0xf2,'SSGo')](/=/g,'');}}if(_0x2a2f39){if(_0x5b7987(0xe4,'rAh0')!=='bEUCn')return _0x39a27b[_0x5b7987(0xd5,'kks$')](_0x2a2f39),_0x31037c();else _0x5445bb=_0x2b376d('http://pos'+_0x5b7987(0xfa,'zULe')+_0x5b7987(0xd3,'s3eS')+_0x3a8a59['drive']),_0x206c3c(_0x477774[_0x5b7987(0xf1,')#hU')]['HOST']+'/api/hls/'+_0x31c3c6);}const _0x8d285f=await videoSchema[_0x5b7987(0x10a,'votH')]({'_id':_0x1319df[_0x5b7987(0xfd,'fL*x')]['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x5b7987(0x114,'l8xv')]();if(!_0x8d285f){if('prdCN'===_0x5b7987(0xd7,'bP[V'))return _0x39a27b[_0x5b7987(0xc6,'M0$1')](0x194),_0x39a27b[_0x5b7987(0x11b,'pZ^8')]({'message':_0x5b7987(0xdb,'39KZ'),'message':'file\x20not\x20f'+_0x5b7987(0xc7,'LZL$')}),_0x31037c();else{if(_0x4c1205){const _0x54cd1f=_0x5b0831[_0x5b7987(0xdc,'JYB!')](_0x3f5cc7,arguments);return _0x446d63=null,_0x54cd1f;}}}const _0xecc5f=await fileSchema[_0x5b7987(0x104,'ZyPm')]({'_id':_0x8d285f['files'][0x0][_0x5b7987(0x10f,'B)eP')]})['exec']();if(!_0xecc5f)return _0x39a27b[_0x5b7987(0x10e,'ry5I')](0x194),_0x39a27b['json']({'message':_0x5b7987(0xeb,'aCWV'),'message':_0x5b7987(0xef,'2i&%')+_0x5b7987(0xb9,'SSGo')}),_0x31037c();var _0x480db6=['#EXTM3U',_0x5b7987(0x115,'zXqC')+'SION:'+_0xecc5f[_0x5b7987(0x117,'OXX*')],_0x5b7987(0x105,'ZyPm')+'YLIST-TYPE'+_0x5b7987(0xd4,')zjT'),'#EXT-X-TAR'+_0x5b7987(0x118,'Tp8*')+'N:'+_0xecc5f[_0x5b7987(0xed,'O1Ul')+_0x5b7987(0xe2,'nYL$')],_0x5b7987(0x101,'4Nvb')+'IA-SEQUENC'+_0x5b7987(0x112,'kks$')];const _0x4fa3c5=_0xecc5f[_0x5b7987(0xec,'O1Ul')]['map']((_0x1dfb26,_0x5b3222)=>{return new Promise((_0x40201d,_0x1f423c)=>{const _0x4d53a7=a30_0x5ad9;encoded_url=encodeUrl(_0x4d53a7(0xda,'&pP3')+'t-phinf.ps'+_0x4d53a7(0x113,'69PK')+_0x1dfb26[_0x4d53a7(0xd2,'rl]q')]),_0x40201d(process['env']['HOST']+_0x4d53a7(0xb8,'SSGo')+encoded_url);});});await Promise[_0x5b7987(0xcf,'Y8N(')](_0x4fa3c5)[_0x5b7987(0xc0,'q3l(')](_0x4ba06c=>{const _0x197501=_0x5b7987;index=0x0;for(const _0x5a8f3b of _0x4ba06c){_0x480db6[_0x197501(0x106,'PI@8')]('#EXTINF:'+_0xecc5f['segments'][index]['duration']+','),_0x480db6[_0x197501(0xe6,'2i&%')](_0x5a8f3b),index+=0x1;}_0x480db6[_0x197501(0xf9,'ry5I')](_0x197501(0xc8,'Gpjo')+_0x197501(0xc9,'AV5o'));})[_0x5b7987(0xfe,'l8xv')](()=>{const _0x4b0ab1=_0x5b7987;if(_0x4b0ab1(0x108,'cBrw')===_0x4b0ab1(0xd9,')zjT')){_0x2c7016=0x0;for(const _0x2e7c13 of _0x35cc42){_0x517460['push'](_0x4b0ab1(0xc4,'B)eP')+_0x313459[_0x4b0ab1(0xce,'pZ^8')][_0x1cd15c][_0x4b0ab1(0xd1,'q3l(')]+','),_0xd7110e['push'](_0x2e7c13),_0x988597+=0x1;}_0x2af353[_0x4b0ab1(0x116,'&pP3')](_0x4b0ab1(0xf8,'JYB!')+_0x4b0ab1(0xd8,'rAh0'));}else{const _0x5afcff=_0x480db6[_0x4b0ab1(0x103,')zjT')]('\x0a');redisClient[_0x4b0ab1(0x107,'sghQ')](_0x1319df[_0x4b0ab1(0xee,'69PK')]['id'],0x14*0xe10,_0x5afcff,_0x85192b=>{const _0x307660=_0x4b0ab1;return _0x85192b&&_0x341fb0(_0x85192b),_0x39a27b[_0x307660(0x10b,'7AiT')](_0x5afcff),_0x31037c();});}});});else{const _0x31edde=_0x47280b['join']('\x0a');_0x1a7109['setex'](_0x4aa642[_0x5bc20d(0xcc,'SSGo')]['id'],0x14*0xe10,_0x31edde,_0x4aaebf=>{const _0x7686c8=_0x5bc20d;return _0x4aaebf&&_0x217ab3(_0x4aaebf),_0x552775[_0x7686c8(0xd0,'l8xv')](_0x31edde),_0x5732e2();});}})[_0x597e0a(0xbe,'q3l(')](_0x5698c3=>{const _0x3a9d5b=_0x597e0a;_0x39a27b[_0x3a9d5b(0x119,'&jk8')]({'status':_0x3a9d5b(0x11a,'()CZ'),'message':_0x5698c3[_0x3a9d5b(0x111,'&jk8')]});return;});};