const a30_0x545abe=a30_0x3880;function a30_0x3880(_0x3cfc3f,_0x42c63e){const _0x2b7c90=a30_0x5226();return a30_0x3880=function(_0x143df8,_0x4b8c80){_0x143df8=_0x143df8-0x77;let _0x52261e=_0x2b7c90[_0x143df8];if(a30_0x3880['NDgmoa']===undefined){var _0x388091=function(_0x5a26f1){const _0x146e4d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x445731='',_0x467b2b='',_0x56b68b=_0x445731+_0x388091;for(let _0x5cd70b=0x0,_0x4ff529,_0x2a91f8,_0x192eeb=0x0;_0x2a91f8=_0x5a26f1['charAt'](_0x192eeb++);~_0x2a91f8&&(_0x4ff529=_0x5cd70b%0x4?_0x4ff529*0x40+_0x2a91f8:_0x2a91f8,_0x5cd70b++%0x4)?_0x445731+=_0x56b68b['charCodeAt'](_0x192eeb+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x4ff529>>(-0x2*_0x5cd70b&0x6)):_0x5cd70b:0x0){_0x2a91f8=_0x146e4d['indexOf'](_0x2a91f8);}for(let _0x4e9c65=0x0,_0x40f511=_0x445731['length'];_0x4e9c65<_0x40f511;_0x4e9c65++){_0x467b2b+='%'+('00'+_0x445731['charCodeAt'](_0x4e9c65)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x467b2b);};const _0x1f6441=function(_0x226c77,_0x41cf9a){let _0x49de3e=[],_0x313aec=0x0,_0x27c32e,_0x312b92='';_0x226c77=_0x388091(_0x226c77);let _0xc5a784;for(_0xc5a784=0x0;_0xc5a784<0x100;_0xc5a784++){_0x49de3e[_0xc5a784]=_0xc5a784;}for(_0xc5a784=0x0;_0xc5a784<0x100;_0xc5a784++){_0x313aec=(_0x313aec+_0x49de3e[_0xc5a784]+_0x41cf9a['charCodeAt'](_0xc5a784%_0x41cf9a['length']))%0x100,_0x27c32e=_0x49de3e[_0xc5a784],_0x49de3e[_0xc5a784]=_0x49de3e[_0x313aec],_0x49de3e[_0x313aec]=_0x27c32e;}_0xc5a784=0x0,_0x313aec=0x0;for(let _0xfc92cb=0x0;_0xfc92cb<_0x226c77['length'];_0xfc92cb++){_0xc5a784=(_0xc5a784+0x1)%0x100,_0x313aec=(_0x313aec+_0x49de3e[_0xc5a784])%0x100,_0x27c32e=_0x49de3e[_0xc5a784],_0x49de3e[_0xc5a784]=_0x49de3e[_0x313aec],_0x49de3e[_0x313aec]=_0x27c32e,_0x312b92+=String['fromCharCode'](_0x226c77['charCodeAt'](_0xfc92cb)^_0x49de3e[(_0x49de3e[_0xc5a784]+_0x49de3e[_0x313aec])%0x100]);}return _0x312b92;};a30_0x3880['TyJhXE']=_0x1f6441,_0x3cfc3f=arguments,a30_0x3880['NDgmoa']=!![];}const _0x3f8ad8=_0x2b7c90[0x0],_0x5872e7=_0x143df8+_0x3f8ad8,_0x2284fc=_0x3cfc3f[_0x5872e7];if(!_0x2284fc){if(a30_0x3880['xENFqB']===undefined){const _0x29fdf7=function(_0x5e2700){this['DVaFfs']=_0x5e2700,this['TxsYqW']=[0x1,0x0,0x0],this['XyQBnN']=function(){return'newState';},this['MONjqt']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['UNvONI']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x29fdf7['prototype']['GjoAiH']=function(){const _0x2cc5c9=new RegExp(this['MONjqt']+this['UNvONI']),_0x53398c=_0x2cc5c9['test'](this['XyQBnN']['toString']())?--this['TxsYqW'][0x1]:--this['TxsYqW'][0x0];return this['wfkVVA'](_0x53398c);},_0x29fdf7['prototype']['wfkVVA']=function(_0x4c9515){if(!Boolean(~_0x4c9515))return _0x4c9515;return this['kiewub'](this['DVaFfs']);},_0x29fdf7['prototype']['kiewub']=function(_0x5685ed){for(let _0x4287e9=0x0,_0x45ae6a=this['TxsYqW']['length'];_0x4287e9<_0x45ae6a;_0x4287e9++){this['TxsYqW']['push'](Math['round'](Math['random']())),_0x45ae6a=this['TxsYqW']['length'];}return _0x5685ed(this['TxsYqW'][0x0]);},new _0x29fdf7(a30_0x3880)['GjoAiH'](),a30_0x3880['xENFqB']=!![];}_0x52261e=a30_0x3880['TyJhXE'](_0x52261e,_0x4b8c80),_0x3cfc3f[_0x5872e7]=_0x52261e;}else _0x52261e=_0x2284fc;return _0x52261e;},a30_0x3880(_0x3cfc3f,_0x42c63e);}function a30_0x5226(){const _0x28b29a=['WPPNW4ZcMa','W5GgWPtcSW','W60lmCoOWPhdGSoPW5eXWOW','WOlcLwVcOIVcIG','kSk4h0O','eYZdQvpcJvFcI1T8WPW','uCklWOyjW7WbzLm+va','W7qYvspcRSkmx2u','lmoSW6zPW6G','W5CZWPNcUSou','W7JdR8o5WQW','W6WOftS','WQbyW4/cJSkdW6JdJG','p8kJgG','leXnW6BcHConWRaRW6VdRa','CmkgiSoTzG','WPVcSmonWOBcTNarW57dRSo3tCoV','WP5yWP/dKmogWQu','WOddOmkHgSkNW6BcNW','WQ1XorJcG8kEuxm','dCkIWRmh','W5XHC3RcUG','W5BcTCoItSk/W6FcNCk6W6BcOmonWP4j','r8oyW6ddUmkCELLoWOm','xSknWRnrW7Waha','W5JdSwiOWQddKSovW7NcHSks','fmkCdu1n','h8o3xa','W7qwiCo+WO7dNmo1WOjaW5v9WOhcMG','efNdP8o/W4ddGGRdGWtcPG','yCoRWPXC','WPhdPmkMgSoY','WOJdRSk/vCkYW70','h8kRWR8f','WRHBW7dcOG','FSo3prb5','WRBdMmoeWO8oW4jHW6hcL8kL','WP3cLwtcTZZcIG','wCo0W6TAC8kwWQ7dSxCgssW','wGxcOCkNWOS','hxpcPSk1','W5JdSwiOW4tdHmk+WO4','wSoZW6TCCmkxWPVdSNinBr8','W51TAW','bCoeW7rbWQPAeW','nmoZvqZcQmo2lSkGWR3cHSk6W7JdSW','WRBdLSoLWPWzW59lW7m','WP7dJf8F','WRhdNmorWOuoW5HrW6C','W5pcSXFcOcySW61kWRZdICokWR0','W6myWQ7dU8kmWOJcSCkEW7WVW4FdGa','W6tdJCkhW4qRWRhdItS','ESo/WOzyW7xdIZFcJ2HX','caxcUCkOWQZcNri','W7xdJfOjWQBdLmkoqwuWub/dNW','WOpdOuBdTq','W59MFhdcRsO','WOpdQupdVdrYW5zoW5xdJq','WPuVoHzFja','fmoEWO/dGG/dUSkA','WOTbWOJdKG','smkgWOi/ASo+W6FdI1q3','WOb1W48bWRVdKSo3jmoyww3dUW','W6vpW5NcMSkKW7BdJ8k1','W4ZcN3RdVW','WQldUhmVW5NcP8kSW63cK8kt','dSomW6O','WOJdGfSiW7JdUq','WP7cUmktW5hdSbmaW4e','WOn0WQvCW4dcR8oloG','WOldRSkan8oHkSk5W5tdSWBcH8oY','WRRcH8keW48','gmomW6pdUq','W4WXcCo5W7FcOSkqW4W','W7pcSCkZW7v1WR3cJb4fWRO','oW5tW73cMmorWQnMW6/dSa','k8o/W7hdImod','dmoaW4Dd','W7qAk8o+WOJdK8o0WPnGW614WRRcQa','WPpdPv3dQN1ZW5C','W5dcG2VdOtpcGmk4l8oSW5G','W4dcSSoRESkHC8kdW4m','jCkTWPjNW7S','xfZcOZxdSa','WPtcHSo8rZaJoWhcRCkZ','i8ogcSoUuCo+p0q','rCoTW7vfACkjWRJdUNem','W5FcGNhdTq','W7JdUuhcHHKcW7FdPYzwW7uv','WPJdLu4FW6u','cmoyW5pdJa','WPiLcbbojCoOWO8','WOK/nqa','WRBdMmocWOeiWPHlW7hcKq','W70BhJlcGa','WPibWQvNWQpcVCkJgmo8yq','FCo0WRrEWQ8zmb4','BIpcUCk/W7tcMmkCAhKQWOivCq','WRvcA8kNW5FcMa','ECoMjba','WQZdGqldILfnW6X/WRVdQa'];a30_0x5226=function(){return _0x28b29a;};return a30_0x5226();}(function(_0x3528ea,_0x24f83a){const _0x5bc295=a30_0x3880,_0x139730=_0x3528ea();while(!![]){try{const _0x3b5d39=parseInt(_0x5bc295(0x95,'%[N8'))/0x1*(parseInt(_0x5bc295(0xa0,'r#n&'))/0x2)+-parseInt(_0x5bc295(0xb9,'Hm@$'))/0x3+parseInt(_0x5bc295(0x91,'%[N8'))/0x4*(parseInt(_0x5bc295(0xc0,'$lwU'))/0x5)+-parseInt(_0x5bc295(0x98,'kyQ^'))/0x6+-parseInt(_0x5bc295(0x9e,'1xv]'))/0x7*(-parseInt(_0x5bc295(0x9c,'Hqf%'))/0x8)+-parseInt(_0x5bc295(0xa9,'yNYd'))/0x9+parseInt(_0x5bc295(0x7e,'N210'))/0xa*(parseInt(_0x5bc295(0xcc,'7wAW'))/0xb);if(_0x3b5d39===_0x24f83a)break;else _0x139730['push'](_0x139730['shift']());}catch(_0x92cc7b){_0x139730['push'](_0x139730['shift']());}}}(a30_0x5226,0x726e8));const a30_0x4b8c80=function(){let _0x7d4097=!![];return function(_0x19f177,_0x54909d){const _0x227499=a30_0x3880;if('uxHWz'===_0x227499(0xbe,'Mcp%')){const _0x2e7314=_0x192eeb?function(){const _0x175276=_0x227499;if(_0x313aec){const _0xb6b277=_0xfc92cb[_0x175276(0x7a,'$lwU')](_0x29fdf7,arguments);return _0x5e2700=null,_0xb6b277;}}:function(){};return _0x49de3e=![],_0x2e7314;}else{const _0x599426=_0x7d4097?function(){const _0x384985=_0x227499;if(_0x54909d){const _0x191010=_0x54909d[_0x384985(0x8e,'rA3D')](_0x19f177,arguments);return _0x54909d=null,_0x191010;}}:function(){};return _0x7d4097=![],_0x599426;}};}(),a30_0x143df8=a30_0x4b8c80(this,function(){const _0x3ef3e4=a30_0x3880;return a30_0x143df8[_0x3ef3e4(0xcb,'fzsL')]()[_0x3ef3e4(0x90,'(98l')](_0x3ef3e4(0xd2,'Hm@$')+'+$')[_0x3ef3e4(0x99,'jpct')]()[_0x3ef3e4(0xb6,'6$(I')+'r'](a30_0x143df8)['search']('(((.+)+)+)'+'+$');});a30_0x143df8();const fileSchema=require(a30_0x545abe(0x88,'r#n&')+a30_0x545abe(0xa6,'Djiz')),videoSchema=require(a30_0x545abe(0xd6,'*LAX')+a30_0x545abe(0xd7,'N210')),base64=require(a30_0x545abe(0x7d,'TqAV')),redisClient=require(a30_0x545abe(0xc1,'%[N8')+'s'),encodeUrl=_0x46f46b=>{const _0x40b089=a30_0x545abe,_0x33b3fe=base64[_0x40b089(0xa3,'y7I]')](_0x46f46b);var _0x3ba86c='';for(var _0x1d4564=_0x33b3fe[_0x40b089(0xd3,'(98l')]-0x1;_0x1d4564>=0x0;_0x1d4564--){_0x3ba86c+=_0x33b3fe[_0x1d4564];}return _0x3ba86c['replace'](/=/g,'');};module['exports']=(_0x57ae1b,_0x59c324)=>{const _0x300969=a30_0x545abe;return new Promise((_0x5be499,_0x29b307)=>{const _0x594e95=a30_0x3880;redisClient[_0x594e95(0x96,'y7I]')](_0x57ae1b['params']['id'],async(_0x6da1de,_0x371b0b)=>{const _0x21c14a=_0x594e95;_0x6da1de&&_0x29b307(_0x6da1de);if(_0x371b0b)return _0x59c324[_0x21c14a(0xb8,'*LAX')](_0x371b0b),_0x5be499();const _0x5de8f8=await videoSchema['findOne']({'_id':_0x57ae1b['params']['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})[_0x21c14a(0x9a,'ZH@V')]();if(!_0x5de8f8)return _0x59c324[_0x21c14a(0x8b,'xyMN')](0x194),_0x59c324[_0x21c14a(0x8d,'[@1S')]({'message':_0x21c14a(0xce,'rA3D'),'message':_0x21c14a(0xa4,'Hqf%')+_0x21c14a(0xc7,'0GZY')}),_0x5be499();const _0x5c4f40=await fileSchema[_0x21c14a(0x97,'6UiE')]({'_id':_0x5de8f8[_0x21c14a(0x80,'y7I]')][0x0]['_id']})[_0x21c14a(0xa7,'LpP%')]();if(!_0x5c4f40)return _0x21c14a(0xd9,'6y4$')!==_0x21c14a(0xc9,'N210')?_0x418bc4[_0x21c14a(0xc6,'0GZY')]()['search'](_0x21c14a(0xd5,'Mcp%')+'+$')[_0x21c14a(0xbc,'00%Q')]()['constructo'+'r'](_0x412c44)[_0x21c14a(0xa5,'0GZY')](_0x21c14a(0x9f,'4^Kw')+'+$'):(_0x59c324[_0x21c14a(0xae,'ZH@V')](0x194),_0x59c324[_0x21c14a(0x93,'V[pd')]({'message':_0x21c14a(0xa2,'Hqf%'),'message':_0x21c14a(0xbf,'IF4q')+_0x21c14a(0xc2,'*ekR')}),_0x5be499());var _0x4d4063=[_0x21c14a(0x83,'MQcw'),_0x21c14a(0xb5,'1xv]')+_0x21c14a(0xd8,'*LAX')+_0x5c4f40[_0x21c14a(0xba,'Hqf%')],_0x21c14a(0xca,'yNYd')+_0x21c14a(0xac,'ZH@V')+_0x21c14a(0xda,'jpct'),_0x21c14a(0xa8,'%[N8')+'GETDURATIO'+'N:'+_0x5c4f40[_0x21c14a(0x8f,'jpct')+_0x21c14a(0xdb,'N210')],_0x21c14a(0x84,'ZH@V')+_0x21c14a(0xcf,'Hqf%')+_0x21c14a(0x86,'W&eJ')];const _0x5792fe=_0x5c4f40[_0x21c14a(0x9b,'jpct')][_0x21c14a(0xad,'6UiE')]((_0x8b1d40,_0x2418ee)=>{return new Promise((_0x38ae28,_0x24382c)=>{const _0x43b07d=a30_0x3880;encoded_url=encodeUrl(_0x43b07d(0xbb,'*ekR')+_0x43b07d(0x79,'6$(I')+_0x43b07d(0xc8,'jpct')+_0x8b1d40[_0x43b07d(0x92,'r#n&')]),_0x38ae28(process[_0x43b07d(0x78,'W&eJ')][_0x43b07d(0xd0,'[@1S')]+_0x43b07d(0x82,'9fcF')+encoded_url);});});await Promise['all'](_0x5792fe)[_0x21c14a(0xab,'*ekR')](_0x122cc6=>{const _0x2545e6=_0x21c14a;if(_0x2545e6(0xb7,'9fcF')==='kytda')_0x411c10(_0x3c159d);else{index=0x0;for(const _0x7315fc of _0x122cc6){_0x4d4063[_0x2545e6(0xc5,'Djiz')](_0x2545e6(0x94,'ZH@V')+_0x5c4f40[_0x2545e6(0xaa,'dbRB')][index]['duration']+','),_0x4d4063[_0x2545e6(0xb3,'9fcF')](_0x7315fc),index+=0x1;}_0x4d4063[_0x2545e6(0xd4,'W&eJ')]('#EXT-X-END'+'LIST');}})[_0x21c14a(0x8c,'%[N8')](()=>{const _0x37d5a5=_0x21c14a,_0x4d19e8=_0x4d4063[_0x37d5a5(0xd1,'6y4$')]('\x0a');redisClient['setex'](_0x57ae1b[_0x37d5a5(0x7c,'LpP%')]['id'],0x14*0xe10,_0x4d19e8,_0x501a29=>{return _0x501a29&&_0x29b307(_0x501a29),_0x59c324['send'](_0x4d19e8),_0x5be499();});});});})[_0x300969(0xc4,'ZH@V')](_0x54529e=>{const _0xf084b4=_0x300969;if(_0xf084b4(0x85,'W&eJ')===_0xf084b4(0xbd,'MQcw')){const _0x42efcc=_0x5d4bf6['join']('\x0a');_0x3e848d[_0xf084b4(0x8a,'TqAV')](_0x11490b[_0xf084b4(0xcd,'Hm@$')]['id'],0x14*0xe10,_0x42efcc,_0x7db477=>{const _0x471dd8=_0xf084b4;return _0x7db477&&_0xeaf0d(_0x7db477),_0x138044[_0x471dd8(0x89,'rfaQ')](_0x42efcc),_0x2786ed();});}else{_0x59c324[_0xf084b4(0xb2,'1xv]')]({'status':_0xf084b4(0x7f,'%[N8'),'message':_0x54529e['message']});return;}});};