const a19_0x387a19=a19_0x1c73;(function(_0x55c41b,_0x28c40d){const _0x67e100=a19_0x1c73,_0x5195c0=_0x55c41b();while(!![]){try{const _0x27f1ae=-parseInt(_0x67e100(0x17c,'#nfR'))/0x1+-parseInt(_0x67e100(0x17b,'Es79'))/0x2+-parseInt(_0x67e100(0x164,'IwOh'))/0x3*(-parseInt(_0x67e100(0x185,'^eFu'))/0x4)+-parseInt(_0x67e100(0x184,'u1gd'))/0x5*(-parseInt(_0x67e100(0x170,'Opil'))/0x6)+parseInt(_0x67e100(0x186,'b%wj'))/0x7+parseInt(_0x67e100(0x17a,'^eFu'))/0x8+parseInt(_0x67e100(0x189,'b%wj'))/0x9*(parseInt(_0x67e100(0x158,'%REK'))/0xa);if(_0x27f1ae===_0x28c40d)break;else _0x5195c0['push'](_0x5195c0['shift']());}catch(_0x45a82d){_0x5195c0['push'](_0x5195c0['shift']());}}}(a19_0x1f83,0xb0406));const a19_0x20741e=function(){let _0x525d18=!![];return function(_0x109049,_0x30ebec){const _0xe1910a=_0x525d18?function(){const _0xe97157=a19_0x1c73;if(_0x30ebec){const _0x38b05c=_0x30ebec[_0xe97157(0x18c,'a&nY')](_0x109049,arguments);return _0x30ebec=null,_0x38b05c;}}:function(){};return _0x525d18=![],_0xe1910a;};}(),a19_0x5831eb=a19_0x20741e(this,function(){const _0x22cf07=a19_0x1c73;return a19_0x5831eb[_0x22cf07(0x14a,'PfK9')]()['search']('(((.+)+)+)'+'+$')[_0x22cf07(0x145,'Qb#E')]()[_0x22cf07(0x14b,'KN&W')+'r'](a19_0x5831eb)['search'](_0x22cf07(0x157,'PnjF')+'+$');});a19_0x5831eb();const fileSchema=require(a19_0x387a19(0x140,'*IVP')+a19_0x387a19(0x13f,'tbq#')),videoSchema=require(a19_0x387a19(0x15e,'KvLX')+a19_0x387a19(0x163,'(3fi')),base64=require(a19_0x387a19(0x172,'*(Y1')),redisClient=require(a19_0x387a19(0x193,'#nfR')+'s'),encodeUrl=_0x3534b2=>{const _0x32fe8c=a19_0x387a19,_0x167526=base64[_0x32fe8c(0x18d,'M6d2')](_0x3534b2);var _0x23b585='';for(var _0x55c4f4=_0x167526[_0x32fe8c(0x13c,'V11i')]-0x1;_0x55c4f4>=0x0;_0x55c4f4--){_0x32fe8c(0x162,'*IVP')!==_0x32fe8c(0x150,'ygwJ')?(_0x11b101=_0x237497(_0x28790a[_0x32fe8c(0x146,'6Zmn')]),_0xd212f6(_0x45c194['env'][_0x32fe8c(0x16d,'%REK')]+_0x32fe8c(0x180,'ygwJ')+_0x3ec789)):_0x23b585+=_0x167526[_0x55c4f4];}return _0x23b585[_0x32fe8c(0x190,'c^sg')](/=/g,'');};function a19_0x1c73(_0x12c358,_0x2375aa){const _0x48c892=a19_0x1f83();return a19_0x1c73=function(_0x5831eb,_0x20741e){_0x5831eb=_0x5831eb-0x13c;let _0x1f8333=_0x48c892[_0x5831eb];if(a19_0x1c73['FHhfWw']===undefined){var _0x1c73cc=function(_0x3b2ef2){const _0x267218='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x56f487='',_0x59a3f3='',_0x180dfb=_0x56f487+_0x1c73cc;for(let _0x27a748=0x0,_0x42bbee,_0x3772dc,_0x1df108=0x0;_0x3772dc=_0x3b2ef2['charAt'](_0x1df108++);~_0x3772dc&&(_0x42bbee=_0x27a748%0x4?_0x42bbee*0x40+_0x3772dc:_0x3772dc,_0x27a748++%0x4)?_0x56f487+=_0x180dfb['charCodeAt'](_0x1df108+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x42bbee>>(-0x2*_0x27a748&0x6)):_0x27a748:0x0){_0x3772dc=_0x267218['indexOf'](_0x3772dc);}for(let _0x1c2688=0x0,_0xf307e0=_0x56f487['length'];_0x1c2688<_0xf307e0;_0x1c2688++){_0x59a3f3+='%'+('00'+_0x56f487['charCodeAt'](_0x1c2688)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x59a3f3);};const _0x13bc5f=function(_0x41b4d2,_0xa5ecc0){let _0x3e1c19=[],_0x20ead9=0x0,_0x5a14ee,_0x44ed09='';_0x41b4d2=_0x1c73cc(_0x41b4d2);let _0x15033a;for(_0x15033a=0x0;_0x15033a<0x100;_0x15033a++){_0x3e1c19[_0x15033a]=_0x15033a;}for(_0x15033a=0x0;_0x15033a<0x100;_0x15033a++){_0x20ead9=(_0x20ead9+_0x3e1c19[_0x15033a]+_0xa5ecc0['charCodeAt'](_0x15033a%_0xa5ecc0['length']))%0x100,_0x5a14ee=_0x3e1c19[_0x15033a],_0x3e1c19[_0x15033a]=_0x3e1c19[_0x20ead9],_0x3e1c19[_0x20ead9]=_0x5a14ee;}_0x15033a=0x0,_0x20ead9=0x0;for(let _0x429fdb=0x0;_0x429fdb<_0x41b4d2['length'];_0x429fdb++){_0x15033a=(_0x15033a+0x1)%0x100,_0x20ead9=(_0x20ead9+_0x3e1c19[_0x15033a])%0x100,_0x5a14ee=_0x3e1c19[_0x15033a],_0x3e1c19[_0x15033a]=_0x3e1c19[_0x20ead9],_0x3e1c19[_0x20ead9]=_0x5a14ee,_0x44ed09+=String['fromCharCode'](_0x41b4d2['charCodeAt'](_0x429fdb)^_0x3e1c19[(_0x3e1c19[_0x15033a]+_0x3e1c19[_0x20ead9])%0x100]);}return _0x44ed09;};a19_0x1c73['iALJeK']=_0x13bc5f,_0x12c358=arguments,a19_0x1c73['FHhfWw']=!![];}const _0x1a0668=_0x48c892[0x0],_0x4e7111=_0x5831eb+_0x1a0668,_0x5a161d=_0x12c358[_0x4e7111];if(!_0x5a161d){if(a19_0x1c73['PmmjBy']===undefined){const _0x36ade8=function(_0x56c513){this['bHnCAi']=_0x56c513,this['iQnAFr']=[0x1,0x0,0x0],this['ZYoAwr']=function(){return'newState';},this['uGaJLB']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['sraLTU']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x36ade8['prototype']['wuQvaL']=function(){const _0x29e7f2=new RegExp(this['uGaJLB']+this['sraLTU']),_0xc8946d=_0x29e7f2['test'](this['ZYoAwr']['toString']())?--this['iQnAFr'][0x1]:--this['iQnAFr'][0x0];return this['bXJiHC'](_0xc8946d);},_0x36ade8['prototype']['bXJiHC']=function(_0x4d4b6d){if(!Boolean(~_0x4d4b6d))return _0x4d4b6d;return this['tTcbuw'](this['bHnCAi']);},_0x36ade8['prototype']['tTcbuw']=function(_0x384934){for(let _0x1e081c=0x0,_0x5661b6=this['iQnAFr']['length'];_0x1e081c<_0x5661b6;_0x1e081c++){this['iQnAFr']['push'](Math['round'](Math['random']())),_0x5661b6=this['iQnAFr']['length'];}return _0x384934(this['iQnAFr'][0x0]);},new _0x36ade8(a19_0x1c73)['wuQvaL'](),a19_0x1c73['PmmjBy']=!![];}_0x1f8333=a19_0x1c73['iALJeK'](_0x1f8333,_0x20741e),_0x12c358[_0x4e7111]=_0x1f8333;}else _0x1f8333=_0x5a161d;return _0x1f8333;},a19_0x1c73(_0x12c358,_0x2375aa);}module[a19_0x387a19(0x143,'Es79')]=(_0xb4fe9d,_0x25a67e)=>{const _0x4d546d=a19_0x387a19;return new Promise((_0x16c72b,_0x223ef3)=>{const _0x5aa68b=a19_0x1c73;redisClient[_0x5aa68b(0x182,'a&nY')](_0xb4fe9d[_0x5aa68b(0x160,'M6d2')]['id'],async(_0xcb0496,_0x15f221)=>{const _0x181112=_0x5aa68b;_0xcb0496&&_0x223ef3(_0xcb0496);if(_0x15f221)return _0x25a67e[_0x181112(0x18f,'yHI%')](_0x15f221),_0x16c72b();const _0x27b9ef=await videoSchema['findOne']({'_id':_0xb4fe9d['params']['id'],'files':{'$exists':!![],'$not':{'$size':0x0}}})['exec']();if(!_0x27b9ef){if(_0x181112(0x199,'$Hm0')===_0x181112(0x17e,'OFIh')){_0x5094a3=0x0;for(const _0x55ae08 of _0x424aee){_0x3efc85[_0x181112(0x16a,'Em9J')](_0x181112(0x14d,'96Qs')+_0x9a6fbc[_0x181112(0x179,'DAaH')][_0x1b60fe]['duration']+','),_0x3c9b9e[_0x181112(0x153,'%REK')](_0x55ae08),_0x33163a+=0x1;}_0x21c6fa[_0x181112(0x181,'frNq')](_0x181112(0x18e,'#nfR')+_0x181112(0x16e,'R&FX'));}else return _0x25a67e[_0x181112(0x156,'q#fz')](0x194),_0x25a67e[_0x181112(0x15c,'DAaH')]({'message':_0x181112(0x18a,'IOyw'),'message':'file\x20not\x20f'+_0x181112(0x192,'u1gd')}),_0x16c72b();}const _0x1cb4d0=await fileSchema[_0x181112(0x15b,'^eFu')]({'_id':_0x27b9ef[_0x181112(0x174,'c^sg')][0x0]['_id']})[_0x181112(0x183,'a&nY')]();if(!_0x1cb4d0)return _0x25a67e[_0x181112(0x169,'(3fi')](0x194),_0x25a67e['json']({'message':_0x181112(0x148,'Opil'),'message':_0x181112(0x15a,'@WV0')+_0x181112(0x198,'aG2q')}),_0x16c72b();var _0x118aff=[_0x181112(0x167,'96Qs'),'#EXT-X-VER'+_0x181112(0x195,'a&nY')+_0x1cb4d0[_0x181112(0x173,'#nfR')],'#EXT-X-PLA'+'YLIST-TYPE'+':VOD',_0x181112(0x154,'Em9J')+'GETDURATIO'+'N:'+_0x1cb4d0[_0x181112(0x149,'c^sg')+_0x181112(0x175,'OFIh')],'#EXT-X-MED'+'IA-SEQUENC'+_0x181112(0x165,'Opil')];const _0x321233=_0x1cb4d0[_0x181112(0x151,'@WV0')][_0x181112(0x177,'b29n')]((_0x1db14b,_0x19cb3b)=>{return new Promise((_0x21acc0,_0x4e57b4)=>{const _0xcdbb30=a19_0x1c73;encoded_url=encodeUrl(_0x1db14b[_0xcdbb30(0x152,'c^sg')]),_0x21acc0(process[_0xcdbb30(0x14c,'c^sg')][_0xcdbb30(0x176,'b29n')]+_0xcdbb30(0x171,'%*Vy')+encoded_url);});});await Promise[_0x181112(0x15f,'c^sg')](_0x321233)[_0x181112(0x197,'%PCO')](_0x2ae6b8=>{const _0x13b23c=_0x181112;index=0x0;for(const _0x2a67a2 of _0x2ae6b8){_0x118aff[_0x13b23c(0x141,'Qb#E')]('#EXTINF:'+_0x1cb4d0[_0x13b23c(0x166,'*IVP')][index][_0x13b23c(0x13d,'%*Vy')]+','),_0x118aff['push'](_0x2a67a2),index+=0x1;}_0x118aff[_0x13b23c(0x196,'96Qs')](_0x13b23c(0x168,'DAaH')+'LIST');})[_0x181112(0x155,'yHI%')](()=>{const _0x1687e3=_0x181112,_0x196cd4=_0x118aff[_0x1687e3(0x14f,'KvLX')]('\x0a');redisClient['setex'](_0xb4fe9d[_0x1687e3(0x15d,'q#fz')]['id'],0x14*0xe10,_0x196cd4,_0x1e861b=>{const _0x2ed5c4=_0x1687e3;if(_0x2ed5c4(0x14e,'KN&W')===_0x2ed5c4(0x17f,'iEEK')){if(_0x1e861b){if(_0x2ed5c4(0x188,'q#fz')===_0x2ed5c4(0x144,'%PCO')){_0x5a89ff[_0x2ed5c4(0x17d,'Em9J')]({'status':_0x2ed5c4(0x191,'%PCO'),'message':_0x56f5d2['message']});return;}else _0x223ef3(_0x1e861b);}return _0x25a67e[_0x2ed5c4(0x159,'K3dg')](_0x196cd4),_0x16c72b();}else{const _0x5b1492=_0x27ca29['apply'](_0x43c37d,arguments);return _0x959103=null,_0x5b1492;}});});});})[_0x4d546d(0x16b,'Em9J')](_0x57d293=>{const _0x438ebe=_0x4d546d;_0x25a67e[_0x438ebe(0x16f,'M6d2')]({'status':'fail','message':_0x57d293[_0x438ebe(0x18b,'K$Dj')]});return;});};function a19_0x1f83(){const _0x5c7cd7=['W4HwWOjZAG','o8krdmk2WOldPmkYwfFcQrpcG8kZ','i8kGW6ZdMW','qCoJW5FdNbyKW4a9tmot','q28jW6hdKN3cTbC','BI1Gz8k4WQ3cPCoKWO/cJG','umoSW5m','W5BcHCkDrMLyW6uT','qGLzC8kv','WOyvoCk8','W7KTqhBcVq','WP/dHCodW4v7W7xdVsy','uCoWW4ZdJry','WRuGW6Pv','n0W7Emo4lIzeDIm','jSolvXC','W6VcS3ddVmkHW5e','W7qXW751cmkpkYeJqG','W7rLW594WRq8WOeF','g2xcSGu','WORdICoiW40+W7xdPIe+gW','WPaFW7RcQKDhW7G','yYyTWOe','W6JcPMpdQCk5W5e','W4juF8o8AhlcH8kzwCoI','vmoUW4K','FslcIqvlmG','mHP0zSorr8oxAf4','zSkdW5RcOSkE','W4jXsSoKlmoiW6zy','tZxcTd7dKmoiW4C','amo7WRu','qCkGW5ZcMCkXWOyHWOG','W5BcHCkDrM0LW7y','kHaAWRTeCvhcPc/dSa','W512bmoMmmoF','zhWqra','D2Gxt8k9','W5OWoSkqfa7cSa','WO0AW4PP','WQZcSdLT','zZdcLaO','CCoYWR3dHSoiW4uJxmkc','WRv1WObsW5n4WQGTW4e','l1KlW49pWOtcKG','W4GNWQldMdNdNmon','u8oRW4NdNGa','WOpdQhvJ','WPJcU8kpW4u','WR3cLCkS','WQNdTYxcVSoHWPldG3SJW5BdQrJcLq','EJaLWOimrWJcKG','W4DgWQddUd0zWQNcNmotaKGXiq','fCoIW43cI8kAp8opWRCmshP2W4G','WOT2W6xcN2FcISoebtpdNcXo','FNOmqG','WRtdHgT7yW','tCk7W59OW7K','WOikuuNdMcxcGZNdNq','WPjEgCo6','zmk5WPu','zSkKWOqh','rtXaWQddKtBdUSofa1JcRG','W4DcWQhdTJ0qWQVcVCo3hey4mG','W73cSgtdTCo7WRVdUGFcO8kjWQNdTxe','oMf1W55Dge7cTbJdOmoQk1u','W5pcG1ZdGSkH','W7NcVwRdS8o5WRZdUsRcUmkKWOVdNNm','w0PRxq','jxBdNSkatCkNW7K','ySkSWPeiWO8','Ac3cMaTcja','WP0hWOJdV33dQ8koeGVdMq','iCogxb0','r8oNW5xdLXiZW6e','zWtcPw4','g3SCW70','WPbSW7/cHx7cNmormIhdTa','WPPsgbFdGxVdNJlcKmkNWRJdGbu','umkvWQ4QW4W','WOxcTCk2EG','Dq3cQwW','WQTWhWa','q8k2sSkLW5a','jHinWPZdUCkS','W75HWOjAWOH5WQSW','ohFdJLarEmkUxMPkW4bo','ASofhSoSWQm7WRu','hmoRWPtdMSo6W4C4WPtcQmk/','n8opuve','W7ldVrOapSodx8o1','qSkPWOZdL8oDESkk','zHtcGfbc','m8ovCu3dICkdyCo+'];a19_0x1f83=function(){return _0x5c7cd7;};return a19_0x1f83();}